(this["webpackJsonpsole-composer"]=this["webpackJsonpsole-composer"]||[]).push([[0],{187:function(e,n,t){},325:function(e,n,t){},326:function(e,n,t){},327:function(e,n,t){},329:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),i=t(135),c=t.n(i),s=t(23),o=t(21),l=t(15),u=t(1),d=Object(a.createContext)(null),b=function(e){var n=e.children,t=Object(a.useState)(),r=Object(l.a)(t,2),i=r[0],c=r[1];return Object(a.useEffect)((function(){fetch("/auth/getsession",{method:"GET",credentials:"include"}).then((function(e){return e.json()})).then((function(e){e.err||c(e)}))}),[]),Object(u.jsx)(d.Provider,{value:i,children:n})};b.context=d;var p,h,j,f,x,g,v,O,y,m,C,w,k,D=b,S=t(136),N=t.n(S),V=(t(186),t(187),function(e,n){return fetch(e,{method:n})}),L=function(e,n,t){return fetch(e,{method:n,headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})},I=t(7),P=t(8),z=992,E={tablet:"@media (min-width: ".concat(601,"px)"),desktop:"@media (min-width: ".concat(z,"px)")},M=E.desktop,T=P.a.div(p||(p=Object(I.a)(["\n  font-family: 'Roboto';\n  height: 100%;\n"]))),R=P.a.div(h||(h=Object(I.a)(["\n  z-index: 1;\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  height: 46px;\n  color: #f9f9f9;\n  background-color: #000000;\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n\n  a {\n    color: #ffffff;\n    text-decoration: none;\n    margin: auto 15px;\n  }\n"]))),A=P.a.p(j||(j=Object(I.a)(["\n  margin: auto 15px;\n"]))),U=P.a.div(f||(f=Object(I.a)(["\n  width: 100%;\n  height: 45px;\n"]))),G=(P.a.div(x||(x=Object(I.a)(["\n  width: 100%;\n  height: 46px;\n"]))),P.a.div(g||(g=Object(I.a)(["\n  width: 100%;\n  max-width: 700px;\n  margin: auto;\n  margin-top: 16px;\n\n  "," {\n    margin-bottom: 0;\n  }\n"])),M)),B=P.a.div(v||(v=Object(I.a)(["\n  margin-bottom: 32px;\n  width: 100%;\n"]))),_=P.a.p(O||(O=Object(I.a)(["\n  font-family: 'Poppins', 'Roboto', 'Ariel';\n  margin: 0px;\n  margin-left: 16px;\n  margin-bottom: 8px;\n  font-size: 24px;\n  font-weight: bold;\n"]))),F=P.a.div(y||(y=Object(I.a)(["\n  margin-bottom: 60px;\n  text-align: center;\n"]))),Y="#000000",W=("0.1rem solid ".concat("#000000"),P.a.button(m||(m=Object(I.a)(["\n  box-shadow: none;\n  margin: 0;\n  color: ",";\n  background-color: ",";\n  border: none;\n  border-radius: 5px;\n  width: 100%;\n\n  &:active {\n    box-shadow: none;\n  }\n\n  &:hover {\n    cursor: pointer;\n  }\n\n  &:focus {\n    outline: none;\n  }\n"])),"#ffffff",Y)),X=Object(P.a)(W)(C||(C=Object(I.a)(["\n  height: 40px;\n  background-color: ",";\n  padding: 8px;\n  font-size: 16px;\n  text-transform: capitalize;\n  margin-top: 15px;\n"])),(function(e){return e.google?"#4285f4":Y})),H=Object(P.a)(W)(w||(w=Object(I.a)(["\n  height: 40px;\n  padding: 8px;\n  font-size: 16px;\n  text-transform: capitalize;\n  padding-left: 23px;\n  padding-right: 23px;\n  width: unset;\n"]))),J=Object(P.a)(W)(k||(k=Object(I.a)(["\n  width: calc(100% - 32px);\n  background-color: #000000;\n  height: 50px;\n  font-size: 16px;\n  margin-bottom: 40px;\n  padding: 0;\n  margin-left: 16px;\n  margin-right: 16px;\n"])));var q,Z=function(){var e=Object(o.f)();return Object(u.jsx)(J,{onClick:function(){e.push("/designer")},children:"N E W \xa0 D E S I G N"})},$=P.a.button(q||(q=Object(I.a)(["\n  border: none;\n  color: #ffffff;\n  border-radius: 5px;\n  background-color: #000000;\n  height: 44px;\n  font-size: 16px;\n  width: unset;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 25px;\n  padding-right: 25px;\n"])));var K,Q,ee,ne,te,ae=function(){var e=Object(o.f)();return Object(u.jsx)($,{onClick:function(){e.push("/designer")},children:"S T A R T \xa0 D E S I G N I N G"})},re=P.a.div(K||(K=Object(I.a)(["\n  margin-left: 8px;\n  margin-right: 8px;\n  margin-top: 0px;\n  flex: 0 0 auto;\n"]))),ie=P.a.div(Q||(Q=Object(I.a)(["\n  width: 100%;\n  background-color: #f0f0f0;\n  border-radius: 8px;\n\n  img {\n    width: 100%;\n  }\n"]))),ce=P.a.p(ee||(ee=Object(I.a)(["\n  color: #000000;\n  font-size: 22px;\n  margin-top: 9px;\n  margin-bottom: 0px;\n  margin-left: 5px;\n"]))),se=P.a.p(ne||(ne=Object(I.a)(["\n  color: #000000;\n  font-size: 14px;\n  margin-top: 6px;\n  margin-bottom: 0px;\n  margin-left: 5px;\n"]))),oe=P.a.p(te||(te=Object(I.a)(["\n  color: #777;\n  font-size: 14px;\n  margin-top: 6px;\n  margin-bottom: 0px;\n  margin-left: 5px;\n"])));var le,ue,de,be,pe,he,je=function(e){var n=e.props,t=n._id,a=n.title,r=n.configId,i=n.author,c=n.screenshot,s=Object(o.f)();return Object(u.jsxs)(re,{onClick:function(){s.push("/designer/".concat(t))},children:[Object(u.jsx)(ie,{children:Object(u.jsx)("img",{src:"api/assets/images/".concat(c),alt:"feature-design"})}),Object(u.jsx)(ce,{children:a}),Object(u.jsx)(se,{children:r.modelName}),Object(u.jsx)(oe,{children:i.firstName})]})},fe=E.desktop,xe=P.a.div(le||(le=Object(I.a)(["\n  display: flex;\n  flex-direction: column-reverse;\n  height: unset;\n  margin-bottom: 35px;\n\n  "," {\n    height: 65vh;\n    margin-top: 12vh;\n    flex-direction: unset;\n    max-width: 1100px;\n    margin-left: auto;\n    margin-right: auto;\n  }\n"])),fe),ge=P.a.div(ue||(ue=Object(I.a)(["\n  margin-top: 0px;\n  margin-bottom: 30px;\n  padding-right: 0px;\n  text-align: center;\n  margin-left: 5%;\n  margin-right: 5%;\n  width: 90%;\n  height: 100%;\n\n  "," {\n    margin-top: unset;\n    margin-bottom: unset;\n    padding-right: unset;\n    text-align: unset;\n    width: 100%;\n  }\n"])),fe),ve=P.a.p(de||(de=Object(I.a)(["\n  font-size: 30px;\n  margin-top: 30px;\n  font-weight: bold;\n  margin: 0;\n  margin-bottom: 25px;\n\n  "," {\n    font-size: 40px;\n    margin-top: 70px;\n  }\n"])),fe),Oe=P.a.p(be||(be=Object(I.a)(["\n  font-size: 17px;\n  line-height: 150%;\n  margin: 0;\n  margin-bottom: 30px;\n"]))),ye=P.a.div(pe||(pe=Object(I.a)(["\n  width: 80%;\n  margin-left: 10%;\n  margin-right: 10%;\n  margin-top: 70px;\n  margin-bottom: 60px;\n  padding-left: 1px;\n  height: 100%;\n\n  "," {\n    width: 100%;\n    margin: unset;\n    margin-right: 5%;\n  }\n"])),fe),me=P.a.img(he||(he=Object(I.a)(["\n  max-width: 100%;\n  max-height: 100%;\n"])));var Ce,we,ke,De=function(){return Object(u.jsxs)(xe,{children:[Object(u.jsxs)(ge,{children:[Object(u.jsx)(ve,{children:"Create Something New"}),Object(u.jsx)(Oe,{children:"Sole Composer gives you the ability to design and visualize one\u2011of\u2011a\u2011kind sneakers."}),Object(u.jsx)(ae,{})]}),Object(u.jsx)(ye,{children:Object(u.jsx)(me,{src:"/sole-cover.png"})})]})},Se=E.desktop,Ne=P.a.div(Ce||(Ce=Object(I.a)(["\n  width: 100%;\n  margin-bottom: 24px;\n"]))),Ve=P.a.div(we||(we=Object(I.a)(["\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  gap: 3px;\n  margin: 3px;\n\n  "," {\n    grid-template-columns: 1fr 1fr 1fr;\n    margin: 16px;\n  }\n"])),Se),Le=P.a.div(ke||(ke=Object(I.a)(["\n  width: 100%;\n  background-color: #f0f0f0;\n\n  img {\n    width: 100%;\n  }\n"])));var Ie=function(e){var n=e.myDesigns;return Object(u.jsx)(Ne,{children:Object(u.jsx)(Ve,{children:n.map((function(e,n){return Object(u.jsx)(s.b,{to:"/designer/".concat(e._id),className:"link-to-designer",children:Object(u.jsx)(Le,{children:Object(u.jsx)("img",{src:"/api/assets/images/".concat(e.screenshot),alt:"my-design-preview"})})},n)}))})})};var Pe,ze,Ee,Me,Te,Re,Ae,Ue,Ge,Be,_e,Fe,Ye=function(){var e=Object(a.useContext)(D.context),n=Object(a.useState)(),t=Object(l.a)(n,2),r=t[0],i=t[1],c=Object(a.useState)(),o=Object(l.a)(c,2),d=o[0],b=o[1];Object(a.useEffect)((function(){V("/api/featured","GET").then((function(e){return e.json()})).then((function(e){return i(e)})),e&&V("/api/outlines/mydesigns","GET").then((function(e){return e.json()})).then((function(e){return b(e)}))}),[e]);var p=r?r.featured.map((function(n,t){return Object(u.jsx)(je,{props:n,userData:e},t)})):null;return Object(u.jsxs)(T,{children:[Object(u.jsxs)(R,{children:[Object(u.jsxs)(A,{children:[Object(u.jsx)("strong",{children:"Sole"})," Composer"]}),e?Object(u.jsx)(s.b,{to:"/profile",children:e.firstName}):Object(u.jsx)(s.b,{to:"/login",children:"Login"})]}),Object(u.jsx)(U,{}),!e&&Object(u.jsx)(De,{}),Object(u.jsxs)(G,{children:[r&&Object(u.jsxs)(B,{children:[Object(u.jsx)(_,{children:"FEATURED"}),Object(u.jsx)(N.a,{responsive:{0:{items:1.7},700:{items:3}},items:p})]}),e&&Object(u.jsx)(Z,{}),!e&&Object(u.jsx)(F,{children:Object(u.jsx)(s.b,{to:"/login",children:Object(u.jsx)(H,{children:"sign up"})})}),d&&Object(u.jsx)(_,{children:"MY DESIGNS"}),d&&Object(u.jsx)(Ie,{myDesigns:d})]})]})},We=t(16),Xe=t.n(We),He=t(19),Je=t(27),qe=t(332),Ze=t(333),$e=t(3),Ke=P.a.div(Pe||(Pe=Object(I.a)(["\n  background-color: #212121;\n  border-radius: 9px;\n"]))),Qe=P.a.p(ze||(ze=Object(I.a)(["\n  font-size: 18px;\n  margin: 10px 14px;\n  color: #ffffff;\n"]))),en=P.a.div(Ee||(Ee=Object(I.a)(["\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  column-gap: 6px;\n  row-gap: 6px;\n  margin: 6px;\n"]))),nn=P.a.div(Me||(Me=Object(I.a)(["\n  display: grid;\n  grid-template-columns: 1fr;\n  row-gap: 6px;\n  margin: 6px;\n"]))),tn=P.a.div(Te||(Te=Object(I.a)(["\n  display: flex;\n  justify-content: space-between;\n  margin: 6px;\n"]))),an=P.a.div(Re||(Re=Object(I.a)(["\n  height: 46px;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n"]))),rn=P.a.div(Ae||(Ae=Object(I.a)(["\n  width: 100%;\n  min-width: 0;\n  box-sizing: border-box;\n  border: 1px solid #343434;\n  border-radius: 6px;\n  background-color: #000000;\n  padding: 3px;\n"]))),cn=P.a.button(Ue||(Ue=Object(I.a)(["\n  box-sizing: border-box;\n  border: 1px solid #343434;\n  border-radius: 3px;\n  width: 100%;\n  height: 38px;\n  background-color: #212121;\n  color: ",";\n  padding: 0px;\n  font-size: 16px;\n\n  &:focus {\n    outline: none;\n  }\n"])),(function(e){return e.active?"#ffffff":"#bbbbbb"})),sn=P.a.div(Ge||(Ge=Object(I.a)(["\n  box-sizing: border-box;\n  border: 1px solid #343434;\n  border-radius: 6px;\n  background-color: #000000;\n  padding: 3px;\n  margin-left: 6px;\n"]))),on=P.a.button(Be||(Be=Object(I.a)(["\n  box-sizing: border-box;\n  border: 1px solid;\n  border-color: ",";\n  border-radius: 3px;\n  width: 38px;\n  height: 38px;\n  background-color: ",";\n  padding: 0px;\n  font-size: 16px;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n\n  svg {\n    color: ",";\n  }\n\n  &:focus {\n    outline: none;\n  }\n"])),(function(e){return e.active?"#343434":"#000000"}),(function(e){return e.active?"#212121":"#000000"}),(function(e){return e.active?"#ffffff":"#343434"})),ln=P.a.div(_e||(_e=Object(I.a)(["\n  background-color: #ffffff;\n  position: fixed;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  z-index: 1;\n"]))),un=P.a.div(Fe||(Fe=Object(I.a)(["\n  position: relative;\n  left: 50%;\n  top: 50%;\n  width: 150px;\n  height: 150px;\n  margin: -75px 0 0 -75px;\n  border: 16px solid #e9e9e9;\n  border-top: 16px solid #333;\n  border-radius: 50%;\n  animation: spin 2s linear infinite;\n\n  @keyframes spin {\n    0% {\n      transform: rotate(0deg);\n    }\n    100% {\n      transform: rotate(360deg);\n    }\n  }\n"])));var dn,bn,pn=function(){return Object(u.jsx)(ln,{children:Object(u.jsx)(un,{})})},hn=t(147),jn=P.a.div(dn||(dn=Object(I.a)(["\n  width: 100%;\n  min-width: 0;\n  display: flex;\n  flex: 0 1 auto;\n  overflow: auto;\n  border-radius: 4px;\n  -webkit-overflow-scrolling: touch;\n  -ms-overflow-style: -ms-autohiding-scrollbar;\n\n  &::-webkit-scrollbar {\n    display: none;\n  }\n"]))),fn=P.a.button(bn||(bn=Object(I.a)(["\n  width: 38px;\n  height: 38px;\n  margin-right: 3px;\n  border-radius: 4px;\n  flex: 0 0 auto;\n  background-color: ",";\n  border: none;\n\n  &:last-child {\n    margin-right: 0px;\n  }\n\n  &:focus {\n    outline: none;\n  }\n"])),(function(e){return e.color}));var xn,gn,vn,On,yn,mn,Cn,wn,kn=function(e){var n=e.colorsArray,t=e.handleColorChange;return Object(u.jsx)(rn,{children:Object(u.jsx)(jn,{children:n.map((function(e,n){return Object(u.jsx)(fn,{color:e,onClick:function(){return t(e)}},n)}))})})},Dn=t(77),Sn=P.a.div(xn||(xn=Object(I.a)([""]))),Nn=P.a.div(gn||(gn=Object(I.a)(["\n  height: 20px;\n  position: relative;\n  overflow: hidden;\n  border: 1px solid #343434;\n  border-radius: 4px;\n"]))),Vn=P.a.div(vn||(vn=Object(I.a)(["\n  width: 100%;\n  height: 120px;\n  position: relative;\n  overflow: hidden;\n  border: 1px solid #343434;\n  border-radius: 4px;\n"]))),Ln=P.a.div(On||(On=Object(I.a)(["\n  border-radius: 4px;\n  display: flex;\n  justify-content: space-between;\n  width: 100%;\n  min-width: 0;\n\n  input {\n    width: 100%;\n    height: 38px;\n    margin-right: 3px;\n    border: 1px solid #ffffff;\n    border-radius: 4px;\n    font-size: 14px;\n    padding-left: 8px;\n    padding-right: 0px;\n    box-shadow: none;\n    -webkit-appearance: none;\n    -webkit-border-radius: 4px;\n  }\n"]))),In=P.a.div(yn||(yn=Object(I.a)(["\n  flex: 0 0 auto;\n  width: 38px;\n  height: 38px;\n  margin-left: 3px;\n  border-radius: 4px;\n  background-color: ",";\n"])),(function(e){return e.color})),Pn=P.a.div(mn||(mn=Object(I.a)(["\n  width: 18px;\n  height: 18px;\n  border-radius: 50%;\n  border: #ffffff solid 2px;\n  transform: translate(-9px, -9px);\n"]))),zn=P.a.div(Cn||(Cn=Object(I.a)(["\n  width: 18px;\n  height: 18px;\n  border-radius: 50%;\n  border: #ffffff solid 2px;\n  transform: translate(-9px, 0px);\n"]))),En=Object(hn.a)((function(e){var n=e.hex,t=e.hsl,a=e.hsv,r=e.onChange,i=e.handleColorChange,c=e.colorsArray;return Object(u.jsxs)(Sn,{children:[Object(u.jsxs)(nn,{children:[Object(u.jsx)(rn,{children:Object(u.jsx)(Nn,{children:Object(u.jsx)(Dn.Hue,{hsl:t,onChange:r,pointer:zn})})}),Object(u.jsx)(rn,{children:Object(u.jsx)(Vn,{children:Object(u.jsx)(Dn.Saturation,{hsl:t,hsv:a,onChange:r,pointer:Pn})})}),Object(u.jsx)(kn,{colorsArray:c,handleColorChange:i})]}),Object(u.jsxs)(en,{children:[Object(u.jsx)(rn,{children:Object(u.jsx)(cn,{active:!0,onClick:function(){return i("#"+("00000"+(Math.random()*(1<<24)|0).toString(16)).slice(-6))},children:"Random"})}),Object(u.jsx)(rn,{children:Object(u.jsxs)(Ln,{children:[Object(u.jsx)(Dn.EditableInput,{className:"editable-input",value:n,onChange:r}),Object(u.jsx)(In,{color:n})]})})]})]})})),Mn=E.desktop,Tn=P.a.div(wn||(wn=Object(I.a)(["\n  width: 100vw;\n  height: 100vw;\n  color: #000;\n  flex: 0 0 auto;\n  overflow: hidden;\n\n  "," {\n    height: 100vh;\n    width: 100vh;\n    margin-left: 160px;\n  }\n"])),Mn);function Rn(e){var n,t,r=e.design,i=e.texture,c=e.right,s=e.setCurrentPart,o=e.setCurrentShoe,l=e.alone,d=e.setLayersView,b=e.setCurrentLayer,p=e.setView,h=e.redMapCanvas,j=Object(a.useRef)(),f=Object(qe.a)("/api/assets/models/".concat(r.configData.source.model)).nodes,x=Object(Je.c)($e.TextureLoader,"/api/assets/designimages/".concat(r.configData.source[c?"aoMapRight":"aoMapLeft"]));x.flipY=!1;var g=function(e){if(e.delta<10){var n=Math.floor(1e3*e.uv.x),t=Math.floor(1e3*e.uv.y),a=function(e){switch(e){case 255:return 4;case 220:return 2;case 210:return 0;case 200:return 5;case 190:return 3;case 180:return 1;case 170:return 16;case 160:return 15;case 150:return 14;case 140:return 9;case 130:return 13;case 120:return 11;case 110:return 12;case 100:return 8;case 90:return 10;case 80:return 7;case 70:return 6;case 60:return 17}}(h.getContext("2d").getImageData(n,t,1,1).data[0]);(a||0===a)&&(d("LayersMain"),b(-1),p("Layers"),s(a),o(c?"right":"left"))}};return Object(u.jsx)("group",{ref:j,dispose:null,onPointerDown:function(e){return function(e){e.stopPropagation(),n=e.clientX,t=e.clientY}(e)},onPointerUp:function(e){return function(e){e.stopPropagation(),e.clientX>n-5&&e.clientX<n+5&&e.clientY>t-5&&e.clientY<t+5&&g(e)}(e)},children:Object(u.jsx)("mesh",{geometry:f.af1.geometry,rotation:[Math.PI/2,0,Math.PI/2],position:[0,-1,l?0:c?1.3:-1.3],scale:[c?.35:-.35,.35,.35],children:Object(u.jsx)("meshStandardMaterial",{aoMap:x,map:i})})})}var An,Un,Gn,Bn,_n,Fn=function(e){var n=e.design,t=e.rightTexture,r=e.leftTexture,i=e.texturesLoaded,c=e.setCurrentPart,s=e.setCurrentShoe,o=e.shoeVisibility,l=e.setLayersView,d=e.setCurrentLayer,b=e.setView,p=e.redMapCanvas,h=e.cameraReset,j=e.setCameraReset;function f(e){e.reset&&(Object(Je.d)().camera.position.set(5.5,1.5,5.5),j(!1));return null}return Object(u.jsxs)(Tn,{id:"scene-container-id",children:[Object(u.jsxs)(Je.a,{camera:{fov:45},linear:!0,dpr:3,gl:{preserveDrawingBuffer:!0},children:[Object(u.jsx)(f,{reset:h}),Object(u.jsx)("ambientLight",{}),Object(u.jsxs)(a.Suspense,{fallback:null,children:[o.right&&Object(u.jsx)(Rn,{right:!0,design:n,texture:t,setCurrentPart:c,setCurrentShoe:s,alone:!o.left,setLayersView:l,setCurrentLayer:d,setView:b,redMapCanvas:p}),o.left&&Object(u.jsx)(Rn,{design:n,texture:r,setCurrentPart:c,setCurrentShoe:s,alone:!o.right,setLayersView:l,setCurrentLayer:d,setView:b,redMapCanvas:p})]}),Object(u.jsx)(Ze.a,{minPolarAngle:Math.PI/4,maxPolarAngle:3*Math.PI/4,minDistance:4,maxDistance:12,enablePan:!1,enableDamping:!0})]}),!i&&Object(u.jsx)(pn,{})]})},Yn=E.desktop,Wn=P.a.div(An||(An=Object(I.a)(["\n  position: fixed;\n  bottom: 0;\n  width: 100%;\n  touch-action: none;\n  display: flex;\n  padding-bottom: 30px;\n\n  "," {\n    right: 0;\n    width: 375px;\n  }\n"])),Yn),Xn=P.a.div(Un||(Un=Object(I.a)(["\n  width: 0px;\n  flex: 1 0 auto;\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-end;\n  margin-left: 16px;\n"]))),Hn=P.a.div(Gn||(Gn=Object(I.a)(["\n  width: 70px;\n  flex: 0 0 auto;\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-end;\n"]))),Jn=t(18),qn=P.a.div(Bn||(Bn=Object(I.a)(["\n  display: flex;\n  flex-direction: column;\n  height: 280px;\n  justify-content: space-between;\n"]))),Zn=P.a.div(_n||(_n=Object(I.a)(["\n  width: 40px;\n  height: 40px;\n  margin: 15px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  -webkit-tap-highlight-color: rgba(0, 0, 0, 0);\n  background-color: ",";\n  border-radius: 6px;\n\n  svg {\n    font-size: 22px;\n    color: ",";\n  }\n"])),(function(e){return e.selected?"#212121":"unset"}),(function(e){return e.selected?"#ffffff":"#212121"}));var $n,Kn,Qn,et=function(e){var n=e.handleViewChange,t=e.view,a=function(e){n(t===e?"DesignInfo":e)};return Object(u.jsxs)(qn,{children:[Object(u.jsx)(Zn,{selected:"Layers"===t,onClick:function(){return a("Layers")},children:Object(u.jsx)(Jn.n,{})}),Object(u.jsx)(Zn,{selected:"ChangeBaseColor"===t,onClick:function(){return a("ChangeBaseColor")},children:Object(u.jsx)(Jn.o,{})}),Object(u.jsx)(Zn,{selected:"DesignVisibility"===t,onClick:function(){return a("DesignVisibility")},children:Object(u.jsx)(Jn.m,{})}),Object(u.jsx)(Zn,{selected:"DesignMenu"===t||"ChangeDesignName"===t,onClick:function(){return a("DesignMenu")},children:Object(u.jsx)(Jn.f,{})})]})},nt=P.a.div($n||($n=Object(I.a)(["\n  padding-bottom: 10px;\n  padding-left: 20px;\n"]))),tt=P.a.p(Kn||(Kn=Object(I.a)(["\n  margin: 5px;\n  font-size: 26px;\n  color: #212121;\n"]))),at=P.a.p(Qn||(Qn=Object(I.a)(["\n  margin: 5px;\n  font-size: 16px;\n  color: #212121;\n"])));var rt=function(e){var n=e.design;return Object(u.jsxs)(nt,{children:[Object(u.jsx)(tt,{children:n.title}),Object(u.jsx)(at,{children:n.modelName})]})},it=function(e,n){var t=new FormData;return n?t.append("image",e,"newImage"):t.append("image",e),fetch("/api/assets/uploadimage",{method:"POST",body:t}).then((function(e){return e.json()}))},ct=function(e){return new Promise((function(n){setTimeout((function(){var t=document.getElementById("scene-container-id").firstElementChild.firstElementChild,a=document.createElement("canvas");a.width=1024,a.height=1024,a.getContext("2d").drawImage(t,0,0,1024,1024);for(var r=a.toDataURL("image/png"),i=atob(r.split(",")[1]),c=[],s=0;s<i.length;s++)c.push(i.charCodeAt(s));var o=new Blob([new Uint8Array(c)],{type:"image/png"});o.name="theBlob",o.lastModifiedDate=new Date;var l=new File([o],e,{type:"image/png"});n(l)}),500)}))},st=function(e){var n=e.split("/");return n=n[n.length-1]};var ot,lt,ut,dt=function(e){var n,t=e.handleViewChange,r=e.design,i=e.canSave,c=e.setCanSave,o=e.userData,d=e.setCameraReset,b=Object(a.useState)(!1),p=Object(l.a)(b,2),h=p[0],j=p[1];"object"===typeof o&&"_id"in o&&(n=o._id);var f=function(){var e=Object(He.a)(Xe.a.mark((function e(){var n,t,a;return Xe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=26;break}if(c(!1),r.author){e.next=11;break}return j(!0),d(!0),e.next=7,ct("newImage");case 7:n=e.sent,it(n,!0).then((function(e){var n=st(e.image),t={author:o._id,title:r.title,screenshot:n,configId:"5f925589cc6d6c16e44d5dfd",outlineData:r.outlineData};L("/api/outlines","POST",t).then((function(e){return e.json()})).then((function(e){window.location.href="/designer/".concat(e._id)}))})),e.next=26;break;case 11:if(r.author!==o._id){e.next=20;break}return j(!0),d(!0),e.next=16,ct(r.screenshot);case 16:t=e.sent,it(t,!1).then((function(e){var n=st(e.image),t={author:r.author,title:r.title,screenshot:n,configId:"5f925589cc6d6c16e44d5dfd",outlineData:r.outlineData};L("/api/outlines/".concat(r._id),"PUT",t),j(!1)})),e.next=26;break;case 20:return j(!0),d(!0),e.next=24,ct(r.screenshot);case 24:a=e.sent,it(a,!0).then((function(e){var n=st(e.image),t={author:o._id,title:r.title,screenshot:n,configId:"5f925589cc6d6c16e44d5dfd",outlineData:r.outlineData};L("/api/outlines/","POST",t).then((function(e){return e.json()})).then((function(e){window.location.href="/designer/".concat(e._id)}))}));case 26:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return h?Object(u.jsx)(Ke,{children:Object(u.jsx)(pn,{})}):Object(u.jsxs)(Ke,{children:[Object(u.jsxs)(tn,{children:[Object(u.jsx)(an,{children:Object(u.jsx)(Qe,{children:r.title})}),Object(u.jsx)(sn,{children:Object(u.jsx)(on,{active:!0,onClick:function(){return t("ChangeDesignName")},children:Object(u.jsx)(Jn.p,{})})})]}),Object(u.jsxs)(en,{children:[Object(u.jsx)(rn,{onClick:function(){return d(!0)},children:Object(u.jsx)(cn,{active:!0,children:"Reset Camera"})}),i&&o?Object(u.jsx)(rn,{onClick:function(){f()},children:Object(u.jsx)(cn,{active:!0,children:"Save"})}):Object(u.jsx)(rn,{children:Object(u.jsx)(cn,{children:"Save"})}),o&&r.author===n?Object(u.jsx)(rn,{onClick:function(){o&&o._id===r.author&&(fetch("/api/outlines/".concat(r._id),{method:"DELETE",headers:{"Content-Type":"application/json"}}),window.location.href="/")},children:Object(u.jsx)(cn,{active:!0,children:"Delete"})}):Object(u.jsx)(rn,{children:Object(u.jsx)(cn,{children:"Delete"})}),Object(u.jsx)(rn,{children:Object(u.jsx)(s.b,{to:"/",children:Object(u.jsx)(cn,{active:!0,children:"Exit"})})})]})]})},bt=P.a.div(ot||(ot=Object(I.a)(["\n  width: 50%;\n  margin-left: auto;\n  background-color: #212121;\n  border-radius: 9px;\n"]))),pt=t(13),ht=P.a.div(lt||(lt=Object(I.a)(["\n  border: 1px solid #343434;\n  border-radius: 6px;\n  background-color: #000000;\n  padding: 3px;\n"]))),jt=P.a.button(ut||(ut=Object(I.a)(["\n  border: ",";\n  border-radius: 4px;\n  width: 100%;\n  height: 38px;\n  background-color: ",";\n  color: ",";\n  padding: 0px;\n  width: 100%;\n  font-size: 16px;\n\n  &:focus {\n    outline: none;\n  }\n"])),(function(e){return e.active?"1px solid #343434":"unset"}),(function(e){return e.active?"#212121":"#000000"}),(function(e){return e.active?"#ffffff":"#999999"}));var ft=function(e){var n=e.setCurrentShoe,t=e.visibility,a=e.setVisibility,r=function(e){if("left"===e)if(t.left&&t.right){var r=Object(pt.a)({},t);r.left=!1,a(r),n("right")}else if(t.left&&!t.right){var i=Object(pt.a)({},t);i.left=!1,i.right=!0,a(i),n("right")}else{var c=Object(pt.a)({},t);c.left=!0,a(c),n("left")}else if(t.left&&t.right){var s=Object(pt.a)({},t);s.right=!1,a(s),n("left")}else if(!t.left&&t.right){var o=Object(pt.a)({},t);o.right=!1,o.left=!0,a(o),n("left")}else{var l=Object(pt.a)({},t);l.right=!0,a(l),n("right")}};return Object(u.jsxs)(nn,{children:[Object(u.jsx)(ht,{children:Object(u.jsx)(jt,{active:t.left,onClick:function(){r("left")},children:"Left"})}),Object(u.jsx)(ht,{children:Object(u.jsx)(jt,{active:t.right,onClick:function(){r("right")},children:"Right"})})]})};var xt,gt,vt=function(e){var n=e.currentShoe,t=e.setCurrentShoe,a=e.shoeVisibility,r=e.setShoeVisibility;return Object(u.jsx)(bt,{children:Object(u.jsx)(Ke,{children:Object(u.jsx)(ft,{currentShoe:n,setCurrentShoe:t,visibility:a,setVisibility:r})})})},Ot=t(35),yt=P.a.div(xt||(xt=Object(I.a)(["\n  box-sizing: border-box;\n  background-color: #000000;\n  border-radius: 6px;\n  border: 1px solid #343434;\n  display: flex;\n  flex-direction: row;\n  padding: 3px;\n"]))),mt=P.a.button(gt||(gt=Object(I.a)(["\n  box-sizing: border-box;\n  font-size: 16px;\n  color: ",";\n  background-color: ",";\n  border: 1px solid;\n  border-radius: 3px;\n  border-color: ",";\n  width: 100%;\n  height: 38px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n"])),(function(e){return e.active?"#ffffff":"#999999"}),(function(e){return e.active?"#212121":"#000000"}),(function(e){return e.active?"#343434":"#000000"}));var Ct,wt,kt,Dt,St,Nt=function(e){var n=e.design,t=e.setDesign,r=e.setCanSave,i=e.handleUpdateBaseColor,c=e.currentShoe,s=e.setCurrentShoe,o=Object(a.useState)([]),d=Object(l.a)(o,2),b=d[0],p=d[1];Object(a.useEffect)((function(){p(function(){var e=[];for(var t in n.outlineData.parts){for(var a in n.outlineData.parts[t].right){var r=n.outlineData.parts[t].right[a].type;if("color"===r||"mask"===r){var i=n.outlineData.parts[t].right[a].color;e.includes(i)||e.push(i)}}for(var c in n.outlineData.parts[t].left){var s=n.outlineData.parts[t].left[c].type;if("color"===s||"mask"===s){var o=n.outlineData.parts[t].left[c].color;e.includes(o)||e.push(o)}}}for(var l in n.outlineData.overlays){for(var u in n.outlineData.overlays[l].right)if("color"===n.outlineData.overlays[l].right[u].type){var d=n.outlineData.overlays[l].right[u].color;e.includes(d)||e.push(d)}for(var b in n.outlineData.overlays[l].left)if("color"===n.outlineData.overlays[l].left[b].type){var p=n.outlineData.overlays[l].left[b].color;e.includes(p)||e.push(p)}}var h=n.outlineData.baseColors.right;e.includes(h)||e.push(h);var j=n.outlineData.baseColors.left;return e.includes(j)||e.push(j),e}())}),[n,p]);var h=Object(a.useState)(n.outlineData.baseColors.left===n.outlineData.baseColors.right?"both":c),j=Object(l.a)(h,2),f=j[0],x=j[1],g=Object(a.useState)(n.outlineData.baseColors[c]),v=Object(l.a)(g,2),O=v[0],y=v[1],m=function(e){var n=e.hex||e;y(n)},C=function(e){x(e),"right"!==e&&"left"!==e||(s(e),y(n.outlineData.baseColors[e]))};return Object(u.jsxs)(Ke,{children:[Object(u.jsx)(nn,{children:Object(u.jsxs)(yt,{children:[Object(u.jsx)(mt,{active:"left"===f,onClick:function(){C("left")},children:"Left"}),Object(u.jsx)(mt,{active:"both"===f,onClick:function(){C("both")},children:"Both"}),Object(u.jsx)(mt,{active:"right"===f,onClick:function(){C("right")},children:"Right"})]})}),Object(u.jsx)(En,{colorsArray:b,color:O,onChangeComplete:m,handleColorChange:m}),Object(u.jsxs)(tn,{children:[Object(u.jsx)(an,{children:Object(u.jsx)(Qe,{children:"Base Color"})}),Object(u.jsx)(sn,{children:Object(u.jsx)(on,{active:!0,onClick:function(){return function(){var e=Object(Ot.cloneDeep)(n);"left"===f?e.outlineData.baseColors.left=O:"right"===f?e.outlineData.baseColors.right=O:"both"===f&&(e.outlineData.baseColors.left=O,e.outlineData.baseColors.right=O),r(!0),t(e),i(e)}()},children:Object(u.jsx)(Jn.g,{})})})]})]})},Vt=function(e){var n=e.split(/(?=[A-Z])/).join(" ");return n.charAt(0).toUpperCase()+n.substr(1)},Lt=P.a.div(Ct||(Ct=Object(I.a)(["\n  display: flex;\n  width: 100%;\n  justify-content: center;\n"]))),It=P.a.div(wt||(wt=Object(I.a)(["\n  width: 100%;\n  min-width: 0;\n  box-sizing: border-box;\n  border: 1px solid #343434;\n  border-radius: 6px;\n  background-color: #000000;\n  padding: 3px;\n"]))),Pt=P.a.button(kt||(kt=Object(I.a)(["\n  width: 100%;\n  height: 38px;\n  text-align: center;\n  border: 1px solid #343434;\n  background-color: #212121;\n  color: #ffffff;\n  font-size: 16px;\n  padding: 0;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n\n  &:focus {\n    outline: none;\n  }\n"]))),zt=P.a.div(Dt||(Dt=Object(I.a)(["\n  box-sizing: border-box;\n  border: 1px solid #343434;\n  border-radius: 6px;\n  background-color: #000000;\n  padding: 3px;\n"]))),Et=P.a.button(St||(St=Object(I.a)(["\n  box-sizing: border-box;\n  border: 1px solid #343434;\n  border-radius: 4px;\n  color: #ffffff;\n  width: 38px;\n  height: 38px;\n  background-color: #212121;\n  padding: 0px;\n  font-size: 16px;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n\n  svg {\n    color: ",";\n  }\n\n  &:focus {\n    outline: none;\n  }\n"])),(function(e){return e.active?"#ffffff":"#343434"}));var Mt,Tt,Rt,At,Ut,Gt,Bt,_t,Ft,Yt,Wt,Xt,Ht,Jt=function(e){var n=e.design,t=e.currentPart,a=e.setCurrentPart,r=e.setCurrentLayer,i=e.setLayersView,c=e.currentShoe,s=e.setCurrentShoe,o=n.configData.partsArray.length,l=n.configData.partsArray,d=function(e){a(0===t&&e<0?o-1:t===o-1&&e>0?0:t+e)};return Object(u.jsx)(nn,{children:Object(u.jsxs)(Lt,{children:[Object(u.jsx)(zt,{children:Object(u.jsx)(Et,{active:!0,onClick:function(){d(-1),r(-1)},children:Object(u.jsx)(Jn.i,{})})}),Object(u.jsx)(zt,{children:Object(u.jsx)(Et,{active:!0,onClick:function(){s("right"===c?"left":"right"),r(-1)},children:c[0].toUpperCase()})}),Object(u.jsx)(It,{children:Object(u.jsx)(Pt,{className:"partname-button",onClick:function(){i("PartList")},children:Vt(l[t])})}),Object(u.jsx)(zt,{children:Object(u.jsx)(Et,{active:!0,onClick:function(){d(1),r(-1)},children:Object(u.jsx)(Jn.j,{})})})]})})},qt=P.a.div(Mt||(Mt=Object(I.a)([""]))),Zt=P.a.div(Tt||(Tt=Object(I.a)(["\n  height: 5px;\n  background-color: #000000;\n  border-top: 1px solid #343434;\n  border-bottom: 1px solid #343434;\n  border-right: none;\n  border-left: none;\n"]))),$t=P.a.div(Rt||(Rt=Object(I.a)(["\n  margin: 6px;\n  display: flex;\n  justify-content: space-between;\n"]))),Kt=P.a.div(At||(At=Object(I.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n"]))),Qt=P.a.p(Ut||(Ut=Object(I.a)(["\n  font-size: 16px;\n  color: #ffffff;\n  margin: 0px;\n  padding-left: 6px;\n"]))),ea=P.a.div(Gt||(Gt=Object(I.a)(["\n  display: flex;\n\n  svg {\n    color: #ffffff;\n  }\n"]))),na=P.a.div(Bt||(Bt=Object(I.a)(["\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n  height: 150px;\n  margin: 6px;\n  border: 1px solid #343434;\n  border-radius: 6px;\n  background-color: #000000;\n  padding: 3px;\n"]))),ta=P.a.div(_t||(_t=Object(I.a)(["\n  display: flex;\n  flex-direction: column-reverse;\n  justify-content: flex-end;\n  border-radius: 4px;\n"]))),aa=P.a.div(Ft||(Ft=Object(I.a)(["\n  display: flex;\n  flex-direction: column;\n  overflow: auto;\n"]))),ra=P.a.div(Yt||(Yt=Object(I.a)(["\n  height: 40px;\n  flex-shrink: 0;\n  display: flex;\n  flex-direction: row;\n  margin-bottom: 3px;\n  font-size: 16px;\n  text-transform: capitalize;\n  overflow: hidden;\n\n  &:first-of-type {\n    margin-bottom: 0;\n  }\n"]))),ia=P.a.div(Wt||(Wt=Object(I.a)(["\n  flex-grow: 1;\n  display: flex;\n  flex-direction: column;\n  background-color: ",";\n  color: ",";\n  justify-content: center;\n  border: ",";\n  border-radius: 4px;\n"])),(function(e){return e.active?"#EEEEEE":"#212121"}),(function(e){return e.active?"#000000":"#EEEEEE"}),(function(e){return e.active?"1px solid #EEEEEE":"1px solid #343434"})),ca=P.a.p(Xt||(Xt=Object(I.a)(["\n  margin: 0px;\n  padding-left: 10px;\n"]))),sa=P.a.div(Ht||(Ht=Object(I.a)(["\n  width: 40px;\n  margin-right: 3px;\n  display: flex;\n  flex-direction: column;\n  border-radius: 4px;\n  background-color: #212121;\n"])));var oa,la,ua,da,ba=function(e){var n,t=e.props,a=t.allLayers,r=t.currentPart,i=t.design,c=t.currentLayer,s=t.numberOfLayers,o=t.setCurrentLayer,l=t.setCurrentPart,d=t.setLayersView,b=t.handleDeleteLayer,p=t.handleEditLayer,h=t.handleMoveLayer,j=t.currentShoe,f=t.setCurrentShoe,x=function(e,n){-1!==e&&(-1===n?0!==e&&h(e,n):e!==s-1&&h(e,n))};return Object(u.jsxs)(qt,{children:[Object(u.jsx)(Jt,{design:i,currentPart:r,setCurrentPart:l,setCurrentLayer:o,setLayersView:d,currentShoe:j,setCurrentShoe:f}),Object(u.jsx)(Zt,{}),Object(u.jsxs)($t,{children:[Object(u.jsx)(Kt,{children:Object(u.jsx)(Qt,{children:"Layers"})}),Object(u.jsxs)(ea,{children:[Object(u.jsx)(sn,{children:Object(u.jsx)(on,{active:-1!==c&&"overlay"!==(null===a||void 0===a||null===(n=a[c])||void 0===n?void 0:n.type),onClick:function(){var e;-1!==(e=c)&&"overlay"!==a[e].type&&b(e)},children:Object(u.jsx)(Jn.s,{})})}),Object(u.jsx)(sn,{children:Object(u.jsx)(on,{active:-1!==c&&s-1!==c,onClick:function(){return x(c,1)},children:Object(u.jsx)(Jn.k,{})})}),Object(u.jsx)(sn,{children:Object(u.jsx)(on,{active:-1!==c&&0!==c,onClick:function(){return x(c,-1)},children:Object(u.jsx)(Jn.h,{})})}),Object(u.jsx)(sn,{children:Object(u.jsx)(on,{active:!0,onClick:function(){return d("AddLayerType")},children:Object(u.jsx)(Jn.q,{})})})]})]}),Object(u.jsx)(na,{id:"layers-box",onClick:function(e){return function(e){e.preventDefault(),"layers-box"===e.target.id&&o(-1)}(e)},children:Object(u.jsx)(aa,{children:Object(u.jsx)(ta,{children:a.map((function(e,n){return Object(u.jsxs)(ra,{onClick:function(){n===c?p(n,e):o(n)},children:["color"===e.type?Object(u.jsx)(sa,{style:{backgroundColor:e.color}}):"graphic"===e.type?Object(u.jsx)(sa,{children:Object(u.jsx)("img",{src:"/api/assets/images/".concat(e.link),style:{width:"100%",height:"100%",objectFit:"cover"},alt:"design-graphic"})}):"mask"===e.type?Object(u.jsx)(sa,{children:Object(u.jsx)("img",{src:"/api/assets/designimages/".concat(e.link),style:{width:"100%",height:"100%",objectFit:"cover"},alt:"design-graphic"})}):Object(u.jsx)(sa,{children:Object(u.jsx)("img",{src:"/api/assets/designimages/".concat(e.source,"Mask.png"),style:{width:"100%",height:"100%",objectFit:"cover"},alt:"design-graphic"})}),Object(u.jsx)(ia,{active:n===c,children:Object(u.jsx)(ca,{children:"overlay"===e.type?Vt(e.source).toLowerCase():e.type})})]},n)}))})})})]})},pa=P.a.div(oa||(oa=Object(I.a)(["\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n  height: 220px;\n  margin: 6px;\n  border: 1px solid #343434;\n  border-radius: 6px;\n  background-color: #000000;\n"]))),ha=P.a.div(la||(la=Object(I.a)(["\n  display: flex;\n  flex-direction: column;\n  overflow: auto;\n"]))),ja=P.a.div(ua||(ua=Object(I.a)(["\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  column-gap: 6px;\n  row-gap: 6px;\n"]))),fa=P.a.button(da||(da=Object(I.a)(["\n  box-sizing: border-box;\n  color: ",";\n  background-color: ",";\n  border: 1px solid;\n  border-color: ",";\n  border-radius: 4px;\n  margin: 3px;\n  height: 40px;\n  font-size: 16px;\n  text-transform: capitalize;\n  overflow: hidden;\n"])),(function(e){return e.active?"#ffffff":"#999999"}),(function(e){return e.active?"#212121":"#000000"}),(function(e){return e.active?"#343434":"#000000"}));var xa=function(e){var n=e.props,t=n.design,a=n.setCurrentPart,r=n.setLayersView,i=n.setCurrentLayer,c=n.currentPartName;return Object(u.jsxs)(Ke,{children:[Object(u.jsx)(Qe,{children:"Select Part"}),Object(u.jsx)(pa,{children:Object(u.jsx)(ha,{children:Object(u.jsx)(ja,{children:t.configData.partsArray.map((function(e,n){return Object(u.jsx)(fa,{active:c===e,onClick:function(){i(-1),a(n),r("LayersMain")},children:e},n)}))})})}),Object(u.jsx)(nn,{children:Object(u.jsx)(rn,{children:Object(u.jsx)(cn,{active:!0,onClick:function(){return r("LayersMain")},children:"Back"})})})]})};var ga=function(e){var n=e.props,t=n.design,a=n.currentPartName,r=n.handleAddLayer,i=n.setLayersView;return Object(u.jsxs)(Ke,{children:[Object(u.jsx)(Qe,{children:"Select Layer Type"}),Object(u.jsxs)(nn,{children:[t.configData.layerTypes[a].types.map((function(e,n){return Object(u.jsx)(rn,{children:"Mask"===e?Object(u.jsx)(cn,{active:!0,onClick:function(){i("MaskTypes")},children:e}):"Graphic"===e?Object(u.jsx)(cn,{active:!0,onClick:function(){i("GraphicPicker")},children:e}):Object(u.jsx)(cn,{active:!0,onClick:function(){r(e),i("LayersMain")},children:e})},n)})),Object(u.jsx)(rn,{children:Object(u.jsx)(cn,{active:!0,onClick:function(){return i("LayersMain")},children:"Cancel"})})]})]})};var va=function(e){var n=e.props,t=n.design,a=n.currentPartName,r=n.handleAddMaskLayer,i=n.setLayersView;return Object(u.jsxs)(Ke,{children:[Object(u.jsx)(Qe,{children:"Select Mask Type"}),Object(u.jsxs)(nn,{children:[t.configData.maskTypes[a].map((function(e,n){return Object(u.jsx)(rn,{children:Object(u.jsx)(cn,{active:!0,onClick:function(){r(e[0],e[1]),i("LayersMain")},children:e[0]})},n)})),Object(u.jsx)(rn,{children:Object(u.jsx)(cn,{active:!0,onClick:function(){return i("LayersMain")},children:"Cancel"})})]})]})};var Oa,ya,ma,Ca,wa=function(e){var n=e.props,t=n.currentLayer,r=n.currentPartName,i=n.design,c=n.handleChangeManager,s=n.setLayersView,o=n.setCanSave,d=n.currentShoe,b=Object(a.useState)("#ffffaa"),p=Object(l.a)(b,2),h=p[0],j=p[1],f=Object(a.useState)([]),x=Object(l.a)(f,2),g=x[0],v=x[1];Object(a.useEffect)((function(){v(function(){var e=[];for(var n in i.outlineData.parts){for(var t in i.outlineData.parts[n].right){var a=i.outlineData.parts[n].right[t].type;if("color"===a||"mask"===a){var r=i.outlineData.parts[n].right[t].color;e.includes(r)||e.push(r)}}for(var c in i.outlineData.parts[n].left){var s=i.outlineData.parts[n].left[c].type;if("color"===s||"mask"===s){var o=i.outlineData.parts[n].left[c].color;e.includes(o)||e.push(o)}}}for(var l in i.outlineData.overlays){for(var u in i.outlineData.overlays[l].right)if("color"===i.outlineData.overlays[l].right[u].type){var d=i.outlineData.overlays[l].right[u].color;e.includes(d)||e.push(d)}for(var b in i.outlineData.overlays[l].left)if("color"===i.outlineData.overlays[l].left[b].type){var p=i.outlineData.overlays[l].left[b].color;e.includes(p)||e.push(p)}}var h=i.outlineData.baseColors.right;e.includes(h)||e.push(h);var j=i.outlineData.baseColors.left;return e.includes(j)||e.push(j),e}()),j("outerOverlay"===r||"innerOverlay"===r?i.outlineData.overlays[r][d][t].color:i.outlineData.parts[r][d][t].color)}),[i,r,t,v,d]);var O=function(e){o(!0);var n=e.hex||e;j(e),c({type:"color-changed",partName:r,layerIndex:t,newColor:n})};return Object(u.jsxs)(Ke,{children:[Object(u.jsx)(En,{color:h,colorsArray:g,onChangeComplete:O,handleColorChange:O}),Object(u.jsxs)(tn,{children:[Object(u.jsx)(an,{children:Object(u.jsx)(Qe,{children:Vt(r)})}),Object(u.jsx)(sn,{children:Object(u.jsx)(on,{active:!0,onClick:function(){return s("LayersMain")},children:Object(u.jsx)(Jn.g,{})})})]})]})},ka=(t(325),P.a.div(Oa||(Oa=Object(I.a)(["\n  height: 300px;\n  position: relative;\n  margin: 6px;\n"])))),Da=P.a.div(ya||(ya=Object(I.a)(["\n  transform: ",";\n"])),(function(e){return e.mirror?"scaleX(-1)":"unset"})),Sa=P.a.button(ma||(ma=Object(I.a)(["\n  background-color: #00000077;\n  color: #ffffff;\n  width: 40px;\n  height: 40px;\n  border: none;\n  margin: auto;\n  border-radius: 50px;\n  padding: 0px;\n  font-size: 20px;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n\n  &:focus {\n    outline: none;\n  }\n"]))),Na=P.a.div(Ca||(Ca=Object(I.a)(["\n  position: absolute;\n  height: 100%;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  display: grid;\n  grid-template-columns: 1fr 3fr 1fr 3fr 1fr;\n  grid-template-rows: 1fr 3fr 1fr 3fr 1fr;\n  z-index: 1;\n  grid-template-areas:\n    'counter . up . clock'\n    '. . . . .'\n    'left . . . right'\n    '. . . . .'\n    'compress . down . expand';\n"])));var Va=function(e){var n=e.props,t=n.currentLayer,r=n.currentPartName,i=n.graphicVisualCanvas,c=n.handleChangeManager,s=n.handleUpdateGraphicVisualCanvas,o=n.setLayersView,l=n.setCanSave,d=n.currentShoe,b=function(e,n){l(!0),c({type:"graphic-moved",partName:r,layerIndex:t,direction:e,distance:n})};return Object(a.useEffect)((function(){!function(){var e=document.getElementById("graphic-visual-container");e.innerHTML="",e.appendChild(i)}(),s(r)}),[]),Object(u.jsxs)(Ke,{children:[Object(u.jsxs)(ka,{children:[Object(u.jsxs)(Na,{children:[Object(u.jsx)(Sa,{id:"up-button",onClick:function(){return b("vert",-30)},children:Object(u.jsx)(Jn.d,{})}),Object(u.jsx)(Sa,{id:"down-button",onClick:function(){return b("vert",30)},children:Object(u.jsx)(Jn.a,{})}),Object(u.jsx)(Sa,{id:"left-button",onClick:function(){return b("hor",-30)},children:Object(u.jsx)(Jn.b,{})}),Object(u.jsx)(Sa,{id:"right-button",onClick:function(){return b("hor",30)},children:Object(u.jsx)(Jn.c,{})}),Object(u.jsx)(Sa,{id:"scale-up-button",onClick:function(){return b("scale",1.1)},children:Object(u.jsx)(Jn.e,{})}),Object(u.jsx)(Sa,{id:"scale-down-button",onClick:function(){return b("scale",.9)},children:Object(u.jsx)(Jn.l,{})}),Object(u.jsx)(Sa,{id:"clockwise-button",onClick:function(){return b("rotate",5)},children:Object(u.jsx)(Jn.r,{})}),Object(u.jsx)(Sa,{id:"counterclockwise-button",onClick:function(){return b("rotate",-5)},children:Object(u.jsx)(Jn.t,{})})]}),Object(u.jsx)(Da,{id:"graphic-visual-container",mirror:"left"===d})]}),Object(u.jsxs)(en,{children:[Object(u.jsx)(rn,{children:Object(u.jsx)(cn,{active:!0,onClick:function(){return b("reset",0)},children:"Reset"})}),Object(u.jsx)(rn,{children:Object(u.jsx)(cn,{active:!0,onClick:function(){return o("LayersMain")},children:"Done"})})]})]})};t(326),t(327);var La=function(e){var n=e.graphicsArray,t=e.handleAddGraphicLayer;return Object(u.jsx)("div",{className:"current-graphics-container",children:n.map((function(e,n){return Object(u.jsx)("div",{className:"current-graphics-item",onClick:function(){return t(e)},children:Object(u.jsx)("img",{src:"/api/assets/images/".concat(e),alt:"used-already"})},n)}))})};var Ia={LayersMain:ba,PartList:xa,AddLayerType:ga,MaskTypes:va,ColorEditor:wa,GraphicEditor:Va,GraphicPicker:function(e){var n=e.props,t=n.setLayersView,r=n.handleAddLayer,i=n.design,c=Object(a.useState)(!1),s=Object(l.a)(c,2),o=s[0],d=s[1],b=Object(a.useState)(!1),p=Object(l.a)(b,2),h=p[0],j=p[1],f=Object(a.useState)(),x=Object(l.a)(f,2),g=x[0],v=x[1];Object(a.useEffect)((function(){v(function(){var e=["red-apple.png"];for(var n in i.outlineData.parts){for(var t in i.outlineData.parts[n].right)if("graphic"===i.outlineData.parts[n].right[t].type){var a=i.outlineData.parts[n].right[t].link;e.includes(a)||e.push(a)}for(var r in i.outlineData.parts[n].left)if("graphic"===i.outlineData.parts[n].left[r].type){var c=i.outlineData.parts[n].left[r].link;e.includes(c)||e.push(c)}}for(var s in i.outlineData.overlays){for(var o in i.outlineData.overlays[s].right)if("graphic"===i.outlineData.overlays[s].right[o].type){var l=i.outlineData.overlays[s].right[o].link;e.includes(l)||e.push(l)}for(var u in i.outlineData.overlays[s].left)if("graphic"===i.outlineData.overlays[s].left[u].type){var d=i.outlineData.overlays[s].left[u].link;e.includes(d)||e.push(d)}}return e[0]?e:null}())}),[i]);var O=function(){var e=Object(He.a)(Xe.a.mark((function e(n){var t;return Xe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((n.target.files[0].size/1024/1024).toFixed(4)<2)){e.next=8;break}return j(!0),t=n.target.files[0],e.next=6,it(t,!0).then((function(e){var n=st(e.image);y(n)}));case 6:e.next=9;break;case 8:d(!0);case 9:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),y=function(e){r("Graphic",e),t("LayersMain")};return h?Object(u.jsx)(Ke,{children:Object(u.jsx)(pn,{})}):Object(u.jsxs)(Ke,{children:[Object(u.jsx)(Qe,{children:"Graphics"}),g&&Object(u.jsx)("div",{className:"used-graphics",children:Object(u.jsx)(La,{graphicsArray:g,handleAddGraphicLayer:y})}),Object(u.jsx)("div",{className:"upload-image-input",children:Object(u.jsxs)("label",{htmlFor:"image-input-id",className:"upload-image-label",children:[Object(u.jsx)("input",{onChange:function(e){return O(e)},id:"image-input-id",type:"file",name:"myImage",accept:"image/png, image/jpeg, .png, .jpg"}),"Upload"]})}),o&&Object(u.jsx)("div",{className:"file-size-warning",children:Object(u.jsx)("p",{children:"file must be less that 2MB."})}),Object(u.jsx)(nn,{children:Object(u.jsx)(rn,{children:Object(u.jsx)(cn,{active:!0,onClick:function(){return t("LayersMain")},children:"Cancel"})})})]})}};var Pa,za,Ea=function(e){var n=e.layersView,t=e.setLayersView,a=e.currentLayer,r=e.currentPart,i=e.design,c=e.graphicVisualCanvas,s=e.handleChangeManager,o=e.handleUpdateGraphicVisualCanvas,l=e.handleViewChange,d=e.setCurrentLayer,b=e.setCurrentPart,p=e.setCanSave,h=e.currentShoe,j=e.setCurrentShoe,f=Object.keys(i.configData.partsObject)[r],x="parts";"outerOverlay"!==f&&"innerOverlay"!==f||(x="overlays");var g=i.outlineData[x][f][h].length,v=i.outlineData[x][f][h],O=Ia[n],y={allLayers:v,currentPart:r,currentLayer:a,currentPartName:f,design:i,graphicVisualCanvas:c,handleAddLayer:function(e,n){p(!0),s(Object(pt.a)({type:"layer-added",partName:f,layerType:e},n&&{fileName:n})),d(g)},handleAddMaskLayer:function(e,n){p(!0),s({type:"layer-added",partName:f,layerType:"Mask",maskType:e,maskLink:n}),d(g)},handleMoveLayer:function(e,n){p(!0),s({type:"layer-moved",partName:f,layerIndex:e,direction:n}),d(a+n)},handleEditLayer:function(e,n){"color"===n.type?(d(e),t("ColorEditor")):"graphic"===n.type?(d(e),t("GraphicEditor")):"mask"===n.type?(d(e),t("ColorEditor")):"overlay"===n.type&&(b(i.configData.partsArray.indexOf(n.source)),d(-1))},handleDeleteLayer:function(e){p(!0),s({type:"layer-deleted",partName:f,layerIndex:e}),d(-1)},handleChangeManager:s,handleUpdateGraphicVisualCanvas:o,handleViewChange:l,setCurrentLayer:d,setCurrentPart:b,setLayersView:t,numberOfLayers:g,setCanSave:p,currentShoe:h,setCurrentShoe:j,layersView:n};return Object(u.jsx)(Ke,{children:Object(u.jsx)(O,{props:y})})},Ma=(P.a.p(Pa||(Pa=Object(I.a)(["\n  color: #ffffff;\n  margin: 16px;\n"]))),P.a.input(za||(za=Object(I.a)(["\n  display: block;\n  font-size: 18px;\n  outline: none;\n  width: 100%;\n  -webkit-box-sizing: border-box;\n  -moz-box-sizing: border-box;\n  box-sizing: border-box;\n  border: none;\n  border-radius: 3px;\n  height: 38px;\n  padding-left: 10px;\n"]))));var Ta=function(e){var n=e.handleViewChange,t=e.design,a=e.setDesign,r=e.setCanSave;return Object(u.jsxs)(Ke,{children:[Object(u.jsx)(tn,{children:Object(u.jsx)(an,{children:Object(u.jsx)(Qe,{children:"Design Name"})})}),Object(u.jsxs)(nn,{children:[Object(u.jsx)(rn,{children:Object(u.jsx)(Ma,{type:"text",id:"design-name-input",defaultValue:t.title})}),Object(u.jsx)(rn,{children:Object(u.jsx)(cn,{active:!0,onClick:function(){return function(){var e=Object(Ot.cloneDeep)(t),i=Object(Ot.startCase)(document.getElementById("design-name-input").value);e.title=i,r(!0),a(e),n("DesignMenu")}()},children:"Done"})})]})]})};var Ra,Aa=function(e){var n,t=e.design,r=e.setDesign,i=e.graphicVisualCanvas,c=e.handleUpdateGraphicVisualCanvas,s=e.handleChangeManager,o=e.handleUpdateBaseColor,d=e.userData,b=e.currentPart,p=e.setCurrentPart,h=e.currentShoe,j=e.setCurrentShoe,f=e.shoeVisibility,x=e.setShoeVisibility,g=e.view,v=e.setView,O=e.layersView,y=e.setLayersView,m=e.currentLayer,C=e.setCurrentLayer,w=e.setCameraReset,k=Object(a.useState)(!1),D=Object(l.a)(k,2),S=D[0],N=D[1],V=function(e){v(e)};return"DesignMenu"===g?n=Object(u.jsx)(dt,{handleViewChange:V,design:t,setDesign:r,canSave:S,setCanSave:N,userData:d,currentShoe:h,setCurrentShoe:j,shoeVisibility:f,setShoeVisibility:x,setCameraReset:w}):"Layers"===g?n=Object(u.jsx)(Ea,{layersView:O,setLayersView:y,handleViewChange:V,design:t,setDesign:r,currentShoe:h,setCurrentShoe:j,currentPart:b,setCurrentPart:p,currentLayer:m,setCurrentLayer:C,graphicVisualCanvas:i,handleUpdateGraphicVisualCanvas:c,handleChangeManager:s,setCanSave:N}):"ChangeDesignName"===g?n=Object(u.jsx)(Ta,{handleViewChange:V,design:t,setDesign:r,setCanSave:N}):"ChangeBaseColor"===g?n=Object(u.jsx)(Nt,{handleViewChange:V,design:t,setDesign:r,setCanSave:N,handleUpdateBaseColor:o,currentShoe:h,setCurrentShoe:j}):"DesignInfo"===g?n=Object(u.jsx)(rt,{design:t}):"DesignVisibility"===g&&(n=Object(u.jsx)(vt,{currentShoe:h,setCurrentShoe:j,shoeVisibility:f,setShoeVisibility:x})),Object(u.jsxs)(Wn,{children:[Object(u.jsx)(Xn,{children:n}),Object(u.jsx)(Hn,{children:Object(u.jsx)(et,{handleViewChange:V,view:g})})]})},Ua=function(){var e=Object(He.a)(Xe.a.mark((function e(n){var t,a,r,i,c,s,o,l,u,d,b,p,h,j,f,x,g,v,O;return Xe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.setTexturesLoaded,a=n.design,r=n.graphicVisualCanvas,i=n.rightInnerOverlayCanvas,c=n.rightOuterOverlayCanvas,s=n.rightTexture,o=n.rightTextureCanvas,l=n.leftInnerOverlayCanvas,u=n.leftOuterOverlayCanvas,d=n.leftTexture,b=n.leftTextureCanvas,p=n.rightCanvasObjectRef,h=n.rightOverlaysCanvasObjectRef,j=n.rightBaseColorCanvasObjectRef,f=n.leftBaseColorCanvasObjectRef,x=n.leftCanvasObjectRef,g=n.leftOverlaysCanvasObjectRef,e.next=3,Za({design:a,type:"overlaysCanvasObject",currentShoe:"right"});case 3:return h.current=e.sent,e.next=6,Za({design:a,type:"overlaysCanvasObject",currentShoe:"left"});case 6:return g.current=e.sent,$a({design:a,overlayCanvasObject:h.current,overlayCanvas:c,partName:"outerOverlay",graphicVisualCanvas:r,currentShoe:"right"}),$a({design:a,overlayCanvasObject:g.current,overlayCanvas:u,partName:"outerOverlay",graphicVisualCanvas:r,currentShoe:"left"}),$a({design:a,overlayCanvasObject:h.current,overlayCanvas:i,partName:"innerOverlay",graphicVisualCanvas:r,currentShoe:"right"}),$a({design:a,overlayCanvasObject:g.current,overlayCanvas:l,partName:"innerOverlay",graphicVisualCanvas:r,currentShoe:"left"}),e.next=13,Za({design:a,type:"partsCanvasObject",overlays:[c,i],currentShoe:"right"});case 13:return p.current=e.sent,e.next=16,Za({design:a,type:"partsCanvasObject",overlays:[u,l],currentShoe:"left"});case 16:return x.current=e.sent,e.next=19,Za({design:a,type:"baseColorCanvasObject",currentShoe:"right"});case 19:return j.current=e.sent,e.next=22,Za({design:a,type:"baseColorCanvasObject",currentShoe:"left"});case 22:return f.current=e.sent,e.next=25,ur({design:a,canvasObject:p.current,baseColorCanvasObject:j.current});case 25:return v=e.sent,e.next=28,ur({design:a,canvasObject:x.current,baseColorCanvasObject:f.current});case 28:O=e.sent,o.getContext("2d").drawImage(v,0,0),s.needsUpdate=!0,b.getContext("2d").drawImage(O,0,0),d.needsUpdate=!0,t(!0);case 34:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),Ga=function(e){var n=new $e.CanvasTexture(e);return n.flipY=!1,n},Ba=function(e){var n=e.design;return new Promise((function(e){var t=n.configData.canvasSize,a=document.createElement("canvas");a.width=t,a.height=t;var r=a.getContext("2d");!function n(){null!==r&&"object"===typeof a?(r.fillStyle="#ffffff",r.fillRect(0,0,t,t),e(a)):setTimeout(n,100)}()}))},_a=function(e){var n=e.design;return new Promise((function(e){var t=n.configData.canvasSize,a=document.createElement("canvas");a.width=t,a.height=t;var r=a.getContext("2d"),i=new Image;i.src="/api/assets/designimages/".concat(n.configData.source.redMap),i.onload=function(){!function n(){null!==r&&"object"===typeof a?(r.drawImage(i,0,0,1e3,1e3),e(a)):setTimeout(n,100)}()}}))},Fa=function(e){var n=e.design.configData.canvasSize,t=document.createElement("canvas");return t.id="graphic-visual-canvas",t.width=n,t.height=n,t},Ya=function(e){var n=e.design,t=e.layer,a=e.partName;return new Promise((function(e){var r=n.configData.partsObject[a].mask,i=t.color,c=n.configData.canvasSize,s=document.createElement("canvas");s.width=c,s.height=c;var o=s.getContext("2d"),l=new Image;l.src="/api/assets/designimages/".concat(r),l.onload=function(){!function n(){null!==o&&"object"===typeof s?(o.drawImage(l,0,0,c,c),o.globalCompositeOperation="source-in",o.fillStyle=i,o.fillRect(0,0,c,c),e(s)):setTimeout(n,100)}()}}))},Wa=function(e){var n=e.design,t=e.layer,a=e.partName,r=e.currentShoe;return new Promise((function(e){var i=n.configData.partsObject[a].mask,c=t.link,s=t.x,o=t.y,l=t.scale,u=t.rotation,d=n.configData.canvasSize,b=document.createElement("canvas");b.width=d,b.height=d;var p=b.getContext("2d"),h=new Image;h.src="/api/assets/images/".concat(c),h.onload=function(){var n=h.width,t=h.height,a=Math.round(Math.sqrt(n*n+t*t)),c=document.createElement("canvas");c.id="pythagorean-canvas",c.width=a,c.height=a;var j=c.getContext("2d");!function n(){if(null!==j&&"object"===typeof c&&null!==p&&"object"===typeof b){j.translate(c.width/2,c.height/2),j.rotate(u*Math.PI/180),j.drawImage(h,h.width/-2,h.height/-2,h.width,h.height);var t=new Image;t.src="/api/assets/designimages/".concat(i),t.onload=function(){p.drawImage(t,0,0,d,d),p.globalCompositeOperation="source-in";var n=s+(d-d*l)/2,a=o+(d-d*l)/2,i=d*l;"left"===r&&(p.scale(-1,1),p.translate(-d,0)),p.drawImage(c,n,a,i,i),e(b)}}else setTimeout(n,100)}()}}))},Xa=function(e){var n=e.design,t=e.layer,a=e.currentShoe;return new Promise((function(e){var r=t.link,i=t.color,c=n.configData.canvasSize,s=document.createElement("canvas");s.width=c,s.height=c;var o=s.getContext("2d"),l=new Image;l.src="/api/assets/designimages/".concat(r),l.onload=function(){!function n(){null!==o&&"object"===typeof s?("left"===a&&"heelWingLogoMask.png"===r&&(o.scale(-1,1),o.translate(-c,0)),o.drawImage(l,0,0,c,c),o.globalCompositeOperation="source-in",o.fillStyle=i,o.fillRect(0,0,c,c),e(s)):setTimeout(n,100)}()}}))},Ha=function(e){var n=e.design,t=e.layer,a=e.partName,r=e.overlayCanvas;return new Promise((function(e){var i=n.configData.partsObject[a].mask,c=t.source,s=n.configData.translations[c][a],o=s.x,l=s.y,u=s.scale,d=s.rotation,b=n.configData.canvasSize,p=document.createElement("canvas");p.width=b,p.height=b;var h=p.getContext("2d"),j=new Image;j.src="/api/assets/designimages/".concat(i),j.onload=function(){!function n(){null!==h&&"object"===typeof p?(h.drawImage(j,0,0,b,b),h.globalCompositeOperation="source-in",h.translate(b*o,b*l),h.rotate(d),h.drawImage(r,0,0,b*u,b*u),e(p)):setTimeout(n,100)}()}}))},Ja=function(){var e=Object(He.a)(Xe.a.mark((function e(n){var t,a,r,i,c,s,o,l;return Xe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=n.design,a=n.designLayers,r=n.partName,i=n.overlays,c=n.currentShoe,s=[],e.t0=Xe.a.keys(a);case 3:if((e.t1=e.t0()).done){e.next=44;break}if(o=e.t1.value,"color"!==a[o].type){e.next=12;break}return e.next=8,Ya({design:t,layer:a[o],partName:r});case 8:l=e.sent,s.push(l),e.next=42;break;case 12:if("graphic"!==a[o].type){e.next=20;break}return e.t2=s,e.next=16,Wa({design:t,layer:a[o],partName:r,currentShoe:c});case 16:e.t3=e.sent,e.t2.push.call(e.t2,e.t3),e.next=42;break;case 20:if("mask"!==a[o].type){e.next=28;break}return e.t4=s,e.next=24,Xa({design:t,layer:a[o],currentShoe:c});case 24:e.t5=e.sent,e.t4.push.call(e.t4,e.t5),e.next=42;break;case 28:if("overlay"!==a[o].type){e.next=42;break}if("outerOverlay"!==a[o].source){e.next=37;break}return e.t6=s,e.next=33,Ha({design:t,layer:a[o],partName:r,overlayCanvas:i[0]});case 33:e.t7=e.sent,e.t6.push.call(e.t6,e.t7),e.next=42;break;case 37:return e.t8=s,e.next=40,Ha({design:t,layer:a[o],partName:r,overlayCanvas:i[1]});case 40:e.t9=e.sent,e.t8.push.call(e.t8,e.t9);case 42:e.next=3;break;case 44:return e.abrupt("return",{layers:s});case 45:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),qa=function(){var e=Object(He.a)(Xe.a.mark((function e(n){var t,a,r,i;return Xe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.design,a=n.partName,r=n.currentShoe,e.next=3,Ya({design:t,layer:{color:t.outlineData.baseColors[r]},partName:a});case 3:return i=e.sent,e.abrupt("return",i);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),Za=function(e){var n=e.design,t=e.type,a=e.overlays,r=e.currentShoe;return new Promise((function(e,i){var c={};(function(){var i=Object(He.a)(Xe.a.mark((function i(){var s,o,l;return Xe.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if("partsCanvasObject"!==t){i.next=11;break}i.t0=Xe.a.keys(n.outlineData.parts);case 2:if((i.t1=i.t0()).done){i.next=9;break}return s=i.t1.value,i.next=6,Ja({design:n,designLayers:n.outlineData.parts[s][r],partName:s,overlays:a,currentShoe:r});case 6:c[s]=i.sent,i.next=2;break;case 9:i.next=31;break;case 11:if("overlaysCanvasObject"!==t){i.next=22;break}i.t2=Xe.a.keys(n.outlineData.overlays);case 13:if((i.t3=i.t2()).done){i.next=20;break}return o=i.t3.value,i.next=17,Ja({design:n,designLayers:n.outlineData.overlays[o][r],partName:o,currentShoe:r});case 17:c[o]=i.sent,i.next=13;break;case 20:i.next=31;break;case 22:if("baseColorCanvasObject"!==t){i.next=31;break}i.t4=Xe.a.keys(n.outlineData.parts);case 24:if((i.t5=i.t4()).done){i.next=31;break}return l=i.t5.value,i.next=28,qa({design:n,partName:l,currentShoe:r});case 28:c[l]=i.sent,i.next=24;break;case 31:e(c);case 32:case"end":return i.stop()}}),i)})));return function(){return i.apply(this,arguments)}})()()}))},$a=function(e){var n=e.design,t=e.overlayCanvasObject,a=e.overlayCanvas,r=e.partName,i=e.graphicVisualCanvas,c=n.configData.canvasSize,s=a.getContext("2d"),o=i.getContext("2d");for(var l in o.clearRect(0,0,c,c),s.clearRect(0,0,c,c),t[r].layers){var u=t[r].layers[l];s.drawImage(u,0,0,c,c),o.drawImage(u,0,0,c,c)}},Ka=function(e){var n=e.design,t=e.graphicVisualCanvas,a=e.partName,r=e.canvasObject,i=e.baseColorCanvasObject,c=n.configData.canvasSize,s=t.getContext("2d");if(s.clearRect(0,0,c,c),i[a]){var o=i[a];s.drawImage(o,0,0,c,c)}for(var l in r[a].layers){var u=r[a].layers[l];s.drawImage(u,0,0,c,c)}},Qa=function(){var e=Object(He.a)(Xe.a.mark((function e(n){var t,a,r,i,c,s,o,l,u,d,b;return Xe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.partName,a=n.layerIndex,r=n.layerObject,i=n.canvasObject,c=n.textureCanvas,s=n.texture,o=n.graphicVisualCanvas,l=n.design,u=n.baseColorCanvasObject,d=n.currentShoe,"color"!==r.type){e.next=7;break}return e.next=4,Ya({design:l,layer:r,partName:t});case 4:b=e.sent,e.next=16;break;case 7:if("graphic"!==r.type){e.next=13;break}return e.next=10,Wa({design:l,layer:r,partName:t,currentShoe:d});case 10:b=e.sent,e.next=16;break;case 13:return e.next=15,Xa({design:l,layer:r,currentShoe:d});case 15:b=e.sent;case 16:i[t].layers[a]=b,ar({textureCanvas:c,canvasObjectPart:i[t],partName:t,texture:s,graphicVisualCanvas:o,design:l,baseColorCanvasObject:u});case 18:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),er=function(){var e=Object(He.a)(Xe.a.mark((function e(n){var t,a,r,i,c,s,o,l,u,d,b,p;return Xe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.canvasObject,a=n.graphicVisualCanvas,r=n.layerObject,i=n.partName,c=n.texture,s=n.textureCanvas,o=n.design,l=n.baseColorCanvasObject,u=n.currentShoe,"color"!==r.type){e.next=8;break}return e.next=4,Ya({design:o,layer:r,partName:i});case 4:d=e.sent,t[i].layers.push(d),e.next=19;break;case 8:if("graphic"!==r.type){e.next=15;break}return e.next=11,Wa({design:o,layer:r,partName:i,currentShoe:u});case 11:b=e.sent,t[i].layers.push(b),e.next=19;break;case 15:return e.next=17,Xa({design:o,layer:r,currentShoe:u});case 17:p=e.sent,t[i].layers.push(p);case 19:ar({textureCanvas:s,canvasObjectPart:t[i],partName:i,texture:c,graphicVisualCanvas:a,design:o,baseColorCanvasObject:l});case 20:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),nr=function(e){var n=e.canvasObject,t=e.partName,a=e.layerIndex,r=e.textureCanvas,i=e.texture,c=e.graphicVisualCanvas,s=e.design,o=e.baseColorCanvasObject;n[t].layers.splice(a,1),ar({textureCanvas:r,canvasObjectPart:n[t],partName:t,texture:i,graphicVisualCanvas:c,design:s,baseColorCanvasObject:o})},tr=function(e){var n=e.canvasObject,t=e.partName,a=e.layerIndex,r=e.direction,i=e.textureCanvas,c=e.texture,s=e.graphicVisualCanvas,o=e.design,l=e.baseColorCanvasObject,u=n[t].layers,d=u[a];u[a]=u[a+r],u[a+r]=d,n[t].layers=u,ar({textureCanvas:i,canvasObjectPart:n[t],partName:t,texture:c,graphicVisualCanvas:s,design:o,baseColorCanvasObject:l})},ar=function(e){var n=e.textureCanvas,t=e.canvasObjectPart,a=e.partName,r=e.texture,i=e.graphicVisualCanvas,c=e.design,s=e.baseColorCanvasObject,o=n.getContext("2d"),l=i.getContext("2d");l.clearRect(0,0,c.configData.canvasSize,c.configData.canvasSize);var u=c.configData.partsObject[a],d=u.x,b=u.y,p=u.width,h=u.height,j=c.configData.divider;for(var f in o.drawImage(s[a],d/j,b/j,p/j,h/j),l.drawImage(s[a],0,0,c.configData.canvasSize,c.configData.canvasSize),t.layers){var x=t.layers[f];o.drawImage(x,d/j,b/j,p/j,h/j),l.drawImage(x,0,0,c.configData.canvasSize,c.configData.canvasSize)}r.needsUpdate=!0},rr=function(e){var n=e.changeObject,t=e.design,a=e.setDesign,r=e.texture,i=e.textureCanvas,c=e.graphicVisualCanvas,s=e.canvasObject,o=e.overlayCanvas,l=e.overlayCanvasObject,u=e.baseColorCanvasObject,d=e.currentShoe,b=n.type,p=n.fileName,h=Object(Ot.cloneDeep)(t);if("graphic-moved"===b){var j=n.partName,f=n.layerIndex,x=n.direction,g=n.distance,v=h.outlineData.overlays[j][d][f];"vert"===x?v.y+=g:"hor"===x?v.x+=g:"scale"===x?v.scale*=g:"rotate"===x?v.rotation+=g:"reset"===x&&(v.y=0,v.x=0,v.scale=1,v.rotation=0),a(h),ir({partName:j,layerIndex:f,layerObject:v,overlayCanvasObject:l,overlayCanvas:o,texture:r,graphicVisualCanvas:c,design:t,canvasObject:s,textureCanvas:i,baseColorCanvasObject:u,currentShoe:d})}else if("color-changed"===b){var O=n.partName,y=n.layerIndex,m=n.newColor,C=h.outlineData.overlays[O][d][y];C.color=m,a(h),ir({partName:O,layerIndex:y,layerObject:C,overlayCanvasObject:l,overlayCanvas:o,texture:r,graphicVisualCanvas:c,design:t,canvasObject:s,textureCanvas:i,baseColorCanvasObject:u,currentShoe:d})}else if("layer-added"===b){var w=n.partName,k=n.layerType;if(0===t.outlineData.overlays[w][d].length){var D=t.configData.overlayParts[w];for(var S in D){var N=D[S];h.outlineData.parts[N][d].push({type:"overlay",source:w})}}"Color"===k?h.outlineData.overlays[w][d].push({type:"color",color:"#777777"}):h.outlineData.overlays[w][d].push({type:"graphic",link:p,x:0,y:0,scale:1,rotation:0}),a(h),cr({overlayCanvasObject:l,partName:w,layerObject:h.outlineData.overlays[w][d].slice(-1)[0],overlayCanvas:o,texture:r,graphicVisualCanvas:c,design:t,textureCanvas:i,canvasObject:s,tempDesign:h,baseColorCanvasObject:u,currentShoe:d})}else if("layer-moved"===b){var V=n.partName,L=n.layerIndex,I=n.direction,P=h.outlineData.overlays[V][d],z=P[L];P[L]=P[L+I],P[L+I]=z,h.outlineData.overlays[V][d]=P,a(h),sr({overlayCanvasObject:l,partName:V,layerIndex:L,direction:I,overlayCanvas:o,texture:r,graphicVisualCanvas:c,design:t,textureCanvas:i,canvasObject:s,baseColorCanvasObject:u,currentShoe:d})}else if("layer-deleted"===b){var E=n.partName,M=n.layerIndex;if(h.outlineData.overlays[E][d].splice(M,1),0===h.outlineData.overlays[E][d].length){var T=t.configData.overlayParts[E];for(var R in T)for(var A=T[R],U=0;U<h.outlineData.parts[A][d].length;U++){var G=U;"overlay"===h.outlineData.parts[A][d][U].type&&h.outlineData.parts[A][d][U].source===E&&(h.outlineData.parts[A][d].splice(G,1),s[A].layers.splice(G,1))}}a(h),or({overlayCanvasObject:l,partName:E,layerIndex:M,overlayCanvas:o,texture:r,graphicVisualCanvas:c,design:t,textureCanvas:i,canvasObject:s,tempDesign:h,baseColorCanvasObject:u,currentShoe:d})}},ir=function(){var e=Object(He.a)(Xe.a.mark((function e(n){var t,a,r,i,c,s,o,l,u,d,b,p,h,j,f,x,g,v,O;return Xe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.partName,a=n.layerIndex,r=n.layerObject,i=n.overlayCanvasObject,c=n.overlayCanvas,s=n.texture,o=n.graphicVisualCanvas,l=n.design,u=n.canvasObject,d=n.textureCanvas,b=n.baseColorCanvasObject,p=n.currentShoe,h=l.configData.overlayParts[t],"color"!==r.type){e.next=8;break}return e.next=5,Ya({design:l,layer:r,partName:t});case 5:j=e.sent,e.next=11;break;case 8:return e.next=10,Wa({design:l,layer:r,partName:t,currentShoe:p});case 10:j=e.sent;case 11:i[t].layers[a]=j,$a({design:l,overlayCanvasObject:i,overlayCanvas:c,partName:t,graphicVisualCanvas:o,currentShoe:p}),e.t0=Xe.a.keys(h);case 14:if((e.t1=e.t0()).done){e.next=32;break}f=e.t1.value,x=h[f],g=0;case 18:if(!(g<l.outlineData.parts[x][p].length)){e.next=30;break}if(v=g,"overlay"!==l.outlineData.parts[x][p][g].type){e.next=27;break}if(l.outlineData.parts[x][p][g].source!==t){e.next=27;break}return e.next=24,Ha({design:l,layer:l.outlineData.parts[x][p][g],partName:x,overlayCanvas:c});case 24:O=e.sent,u[x].layers[v]=O,lr({textureCanvas:d,canvasObjectPart:u[x],partName:x,design:l,baseColorCanvasObject:b});case 27:g++,e.next=18;break;case 30:e.next=14;break;case 32:s.needsUpdate=!0;case 33:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),cr=function(){var e=Object(He.a)(Xe.a.mark((function e(n){var t,a,r,i,c,s,o,l,u,d,b,p,h,j,f,x,g,v,O,y;return Xe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.overlayCanvasObject,a=n.partName,r=n.layerObject,i=n.overlayCanvas,c=n.texture,s=n.graphicVisualCanvas,o=n.design,l=n.textureCanvas,u=n.canvasObject,d=n.tempDesign,b=n.baseColorCanvasObject,p=n.currentShoe,"color"!==r.type){e.next=8;break}return e.next=4,Ya({design:o,layer:r,partName:a});case 4:h=e.sent,t[a].layers.push(h),e.next=13;break;case 8:if("graphic"!==r.type){e.next=13;break}return e.next=11,Wa({design:o,layer:r,partName:a,currentShoe:p});case 11:j=e.sent,t[a].layers.push(j);case 13:$a({design:o,overlayCanvasObject:t,overlayCanvas:i,partName:a,graphicVisualCanvas:s,currentShoe:p}),f=o.configData.overlayParts[a],e.t0=Xe.a.keys(f);case 16:if((e.t1=e.t0()).done){e.next=34;break}x=e.t1.value,g=f[x],v=0;case 20:if(!(v<d.outlineData.parts[g][p].length)){e.next=32;break}if(O=v,"overlay"!==d.outlineData.parts[g][p][v].type){e.next=29;break}if(d.outlineData.parts[g][p][v].source!==a){e.next=29;break}return e.next=26,Ha({design:o,layer:d.outlineData.parts[g][p][v],partName:g,overlayCanvas:i});case 26:y=e.sent,u[g].layers[O]=y,lr({textureCanvas:l,canvasObjectPart:u[g],partName:g,design:o,baseColorCanvasObject:b});case 29:v++,e.next=20;break;case 32:e.next=16;break;case 34:c.needsUpdate=!0;case 35:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),sr=function(){var e=Object(He.a)(Xe.a.mark((function e(n){var t,a,r,i,c,s,o,l,u,d,b,p,h,j,f,x,g,v,O,y;return Xe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=n.overlayCanvasObject,a=n.partName,r=n.layerIndex,i=n.direction,c=n.overlayCanvas,s=n.texture,o=n.graphicVisualCanvas,l=n.design,u=n.textureCanvas,d=n.canvasObject,b=n.baseColorCanvasObject,p=n.currentShoe,h=t[a].layers,j=h[r],h[r]=h[r+i],h[r+i]=j,t[a].layers=h,$a({design:l,overlayCanvasObject:t,overlayCanvas:c,partName:a,graphicVisualCanvas:o,currentShoe:p}),f=l.configData.overlayParts[a],e.t0=Xe.a.keys(f);case 9:if((e.t1=e.t0()).done){e.next=27;break}x=e.t1.value,g=f[x],v=0;case 13:if(!(v<l.outlineData.parts[g][p].length)){e.next=25;break}if(O=v,"overlay"!==l.outlineData.parts[g][p][v].type){e.next=22;break}if(l.outlineData.parts[g][p][v].source!==a){e.next=22;break}return e.next=19,Ha({design:l,layer:l.outlineData.parts[g][p][v],partName:g,overlayCanvas:c});case 19:y=e.sent,d[g].layers[O]=y,lr({textureCanvas:u,canvasObjectPart:d[g],partName:g,design:l,baseColorCanvasObject:b});case 22:v++,e.next=13;break;case 25:e.next=9;break;case 27:s.needsUpdate=!0;case 28:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),or=function(){var e=Object(He.a)(Xe.a.mark((function e(n){var t,a,r,i,c,s,o,l,u,d,b,p,h,j,f,x,g,v;return Xe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=n.overlayCanvasObject,a=n.partName,r=n.layerIndex,i=n.overlayCanvas,c=n.texture,s=n.graphicVisualCanvas,o=n.design,l=n.textureCanvas,u=n.canvasObject,d=n.tempDesign,b=n.baseColorCanvasObject,p=n.currentShoe,t[a].layers.splice(r,1),$a({design:o,overlayCanvasObject:t,overlayCanvas:i,partName:a,graphicVisualCanvas:s,currentShoe:p}),h=o.configData.overlayParts[a],e.t0=Xe.a.keys(h);case 5:if((e.t1=e.t0()).done){e.next=22;break}j=e.t1.value,f=h[j],x=0;case 9:if(!(x<d.outlineData.parts[f][p].length)){e.next=19;break}if(g=x,"overlay"!==d.outlineData.parts[f][p][x].type||d.outlineData.parts[f][p][x].source!==a){e.next=16;break}return e.next=14,Ha({design:o,layer:o.outlineData.parts[f][p][x],partName:f,overlayCanvas:i});case 14:v=e.sent,u[f].layers[g]=v;case 16:x++,e.next=9;break;case 19:lr({textureCanvas:l,canvasObjectPart:u[f],partName:f,design:o,baseColorCanvasObject:b}),e.next=5;break;case 22:c.needsUpdate=!0;case 23:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),lr=function(e){var n=e.textureCanvas,t=e.canvasObjectPart,a=e.partName,r=e.design,i=e.baseColorCanvasObject,c=n.getContext("2d"),s=r.configData.partsObject[a],o=s.x,l=s.y,u=s.width,d=s.height,b=r.configData.divider;for(var p in c.drawImage(i[a],o/b,l/b,u/b,d/b),t.layers){var h=t.layers[p];c.drawImage(h,o/b,l/b,u/b,d/b)}},ur=function(e){var n=e.design,t=e.canvasObject,a=e.baseColorCanvasObject;return new Promise((function(e,r){var i=document.createElement("canvas");i.width=n.configData.canvasSize,i.height=n.configData.canvasSize;var c=i.getContext("2d");!function r(){if("undefined"!==typeof c){for(var s in t){var o=n.configData.partsObject[s],l=o.x,u=o.y,d=o.width,b=o.height,p=n.configData.divider;for(var h in c.drawImage(a[s],l/p,u/p,d/p,b/p),t[s].layers){var j=t[s].layers[h];c.drawImage(j,l/p,u/p,d/p,b/p)}}e(i)}else setTimeout(r,100)}()}))},dr=P.a.div(Ra||(Ra=Object(I.a)(["\n  height: 100vh;\n  width: 100vw;\n  background-color: #f9f9f9;\n  font-family: 'Roboto';\n"])));var br=function(e){var n=e.userData,t=e.designSpec,r=e.graphicVisualCanvas,i=e.rightInnerOverlayCanvas,c=e.rightOuterOverlayCanvas,s=e.rightTexture,o=e.rightTextureCanvas,d=e.leftInnerOverlayCanvas,b=e.leftOuterOverlayCanvas,p=e.leftTexture,h=e.leftTextureCanvas,j=e.redMapCanvas,f=Object(a.useState)(t),x=Object(l.a)(f,2),g=x[0],v=x[1],O=Object(a.useState)(!1),y=Object(l.a)(O,2),m=y[0],C=y[1],w=Object(a.useState)(0),k=Object(l.a)(w,2),D=k[0],S=k[1],N=Object(a.useState)("right"),V=Object(l.a)(N,2),L=V[0],I=V[1],P=Object(a.useState)(-1),z=Object(l.a)(P,2),E=z[0],M=z[1],T=Object(a.useState)({right:!0,left:!0}),R=Object(l.a)(T,2),A=R[0],U=R[1],G=Object(a.useState)("DesignInfo"),B=Object(l.a)(G,2),_=B[0],F=B[1],Y=Object(a.useState)("LayersMain"),W=Object(l.a)(Y,2),X=W[0],H=W[1],J=Object(a.useRef)(),q=Object(a.useRef)(),Z=Object(a.useRef)(),$=Object(a.useRef)(),K=Object(a.useRef)(),Q=Object(a.useRef)(),ee=Object(a.useState)(!0),ne=Object(l.a)(ee,2),te=ne[0],ae=ne[1],re=function(){var e=Object(He.a)(Xe.a.mark((function e(n){var t,a;return Xe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Za({design:n,type:"baseColorCanvasObject",currentShoe:"right"});case 2:return J.current=e.sent,e.next=5,Za({design:n,type:"baseColorCanvasObject",currentShoe:"left"});case 5:return $.current=e.sent,e.next=8,ur({design:g,canvasObject:q.current,baseColorCanvasObject:J.current});case 8:return t=e.sent,e.next=11,ur({design:g,canvasObject:K.current,baseColorCanvasObject:$.current});case 11:a=e.sent,o.getContext("2d").drawImage(t,0,0),s.needsUpdate=!0,h.getContext("2d").drawImage(a,0,0),p.needsUpdate=!0;case 16:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){q.current&&K.current||Ua({setTexturesLoaded:C,design:g,graphicVisualCanvas:r,rightBaseColorCanvasObjectRef:J,rightInnerOverlayCanvas:i,rightOuterOverlayCanvas:c,rightTexture:s,rightTextureCanvas:o,rightCanvasObjectRef:q,rightOverlaysCanvasObjectRef:Z,leftBaseColorCanvasObjectRef:$,leftInnerOverlayCanvas:d,leftOuterOverlayCanvas:b,leftTexture:p,leftTextureCanvas:h,leftCanvasObjectRef:K,leftOverlaysCanvasObjectRef:Q})}),[g,r,i,c,s,o,d,b,p,h]),g?Object(u.jsxs)(dr,{children:[Object(u.jsx)(Fn,{design:g,setView:F,setLayersView:H,rightTexture:s,leftTexture:p,texturesLoaded:m,setCurrentPart:S,setCurrentShoe:I,setCurrentLayer:M,shoeVisibility:A,redMapCanvas:j,cameraReset:te,setCameraReset:ae}),Object(u.jsx)(Aa,{design:g,setDesign:v,view:_,setView:F,currentLayer:E,setCurrentLayer:M,layersView:X,setLayersView:H,graphicVisualCanvas:r,handleUpdateGraphicVisualCanvas:function(e){Ka("outerOverlay"===e||"innerOverlay"===e?"right"===L?{design:g,graphicVisualCanvas:r,partName:e,canvasObject:Z.current,baseColorCanvasObject:J.current,currentShoe:L}:{design:g,graphicVisualCanvas:r,partName:e,canvasObject:Q.current,baseColorCanvasObject:$.current,currentShoe:L}:"right"===L?{design:g,graphicVisualCanvas:r,partName:e,canvasObject:q.current,baseColorCanvasObject:J.current,currentShoe:L}:{design:g,graphicVisualCanvas:r,partName:e,canvasObject:K.current,baseColorCanvasObject:$.current,currentShoe:L})},handleChangeManager:function(e){var n=e.partName;"outerOverlay"===n?rr({changeObject:e,design:g,setDesign:v,texture:"right"===L?s:p,textureCanvas:"right"===L?o:h,graphicVisualCanvas:r,canvasObject:"right"===L?q.current:K.current,overlayCanvas:"right"===L?c:b,overlayCanvasObject:"right"===L?Z.current:Q.current,baseColorCanvasObject:"right"===L?J.current:$.current,currentShoe:L}):"innerOverlay"===n?rr({changeObject:e,design:g,setDesign:v,texture:"right"===L?s:p,textureCanvas:"right"===L?o:h,graphicVisualCanvas:r,canvasObject:"right"===L?q.current:K.current,overlayCanvas:"right"===L?i:d,overlayCanvasObject:"right"===L?Z.current:Q.current,baseColorCanvasObject:"right"===L?J.current:$.current,currentShoe:L}):function(e){var n=e.changeObject,t=e.design,a=e.setDesign,r=e.texture,i=e.textureCanvas,c=e.graphicVisualCanvas,s=e.canvasObject,o=e.baseColorCanvasObject,l=e.currentShoe,u=n.type,d=n.fileName,b=Object(Ot.cloneDeep)(t);if("graphic-moved"===u){var p=n.partName,h=n.layerIndex,j=n.direction,f=n.distance,x=b.outlineData.parts[p][l][h];"vert"===j?x.y+=f:"hor"===j?x.x+=f:"scale"===j?x.scale*=f:"rotate"===j?x.rotation+=f:"reset"===j&&(x.y=0,x.x=0,x.scale=1,x.rotation=0),a(b),Qa({partName:p,layerIndex:h,layerObject:x,canvasObject:s,textureCanvas:i,texture:r,graphicVisualCanvas:c,design:t,baseColorCanvasObject:o,currentShoe:l})}else if("color-changed"===u){var g,v=n.partName,O=n.layerIndex,y=n.newColor;(g="outerOverlay"===v||"innerOverlay"===v?b.outlineData.overlays[v].layers[O]:b.outlineData.parts[v][l][O]).color=y,a(b),Qa({partName:v,layerIndex:O,layerObject:g,canvasObject:s,textureCanvas:i,texture:r,graphicVisualCanvas:c,design:t,baseColorCanvasObject:o,currentShoe:l})}else if("layer-added"===u){var m=n.partName,C=n.layerType;if("Color"===C)b.outlineData.parts[m][l].push({type:"color",color:"#777777"});else if("Graphic"===C)b.outlineData.parts[m][l].push({type:"graphic",link:d,x:0,y:0,scale:1,rotation:0});else{var w=n.maskLink;b.outlineData.parts[m][l].push({type:"mask",link:w,color:"#000000"})}a(b);var k=b.outlineData.parts[m][l].slice(-1)[0];er({canvasObject:s,graphicVisualCanvas:c,layerObject:k,partName:m,texture:r,textureCanvas:i,design:t,baseColorCanvasObject:o,currentShoe:l})}else if("layer-moved"===u){var D=n.partName,S=n.layerIndex,N=n.direction,V=b.outlineData.parts[D][l],L=V[S];V[S]=V[S+N],V[S+N]=L,b.outlineData.parts[D].layers=V,a(b),tr({canvasObject:s,partName:D,layerIndex:S,direction:N,textureCanvas:i,texture:r,graphicVisualCanvas:c,design:t,baseColorCanvasObject:o,currentShoe:l})}else if("layer-deleted"===u){var I=n.partName,P=n.layerIndex;b.outlineData.parts[I][l].splice(P,1),a(b),nr({canvasObject:s,partName:I,layerIndex:P,textureCanvas:i,texture:r,graphicVisualCanvas:c,design:t,baseColorCanvasObject:o,currentShoe:l})}}({changeObject:e,design:g,setDesign:v,texture:"right"===L?s:p,textureCanvas:"right"===L?o:h,graphicVisualCanvas:r,canvasObject:"right"===L?q.current:K.current,baseColorCanvasObject:"right"===L?J.current:$.current,currentShoe:L})},handleUpdateBaseColor:re,userData:n,currentPart:D,setCurrentPart:S,currentShoe:L,setCurrentShoe:I,shoeVisibility:A,setShoeVisibility:U,setCameraReset:ae})]}):Object(u.jsx)(dr,{children:"Please wait..."})};var pr,hr=function(){var e=Object(o.g)().id,n=Object(a.useContext)(D.context),t=Object(a.useState)(null),r=Object(l.a)(t,2),i=r[0],c=r[1],s=Object(a.useState)(null),d=Object(l.a)(s,2),b=d[0],p=d[1],h=Object(a.useState)(null),j=Object(l.a)(h,2),f=j[0],x=j[1],g=Object(a.useState)(null),v=Object(l.a)(g,2),O=v[0],y=v[1],m=Object(a.useState)(null),C=Object(l.a)(m,2),w=C[0],k=C[1],S=Object(a.useState)(null),N=Object(l.a)(S,2),L=N[0],I=N[1],P=Object(a.useState)(null),z=Object(l.a)(P,2),E=z[0],M=z[1],T=Object(a.useState)(null),R=Object(l.a)(T,2),A=R[0],U=R[1],G=Object(a.useState)(null),B=Object(l.a)(G,2),_=B[0],F=B[1],Y=Object(a.useState)(null),W=Object(l.a)(Y,2),X=W[0],H=W[1],J=Object(a.useState)(null),q=Object(l.a)(J,2),Z=q[0],$=q[1],K=function(){var e=Object(He.a)(Xe.a.mark((function e(n){var t,a,r,i,s,o,l;return Xe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(n),p(Fa({design:n})),e.next=4,Ba({design:n});case 4:return t=e.sent,x(t),e.next=8,Ba({design:n});case 8:return a=e.sent,y(a),e.next=12,Ba({design:n});case 12:return r=e.sent,k(r),e.next=16,Ba({design:n});case 16:return i=e.sent,M(i),e.next=20,Ba({design:n});case 20:return s=e.sent,U(s),e.next=24,Ba({design:n});case 24:return o=e.sent,F(o),e.next=28,_a({design:n});case 28:l=e.sent,$(l);case 30:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){e?V("/api/outlines/".concat(e),"GET").then((function(e){return e.json()})).then((function(e){K(e)})):V("/api/outlines/newdesign","GET").then((function(e){return e.json()})).then((function(e){K(e)}))}),[e]),Object(a.useEffect)((function(){w&&_&&(I(Ga(w)),H(Ga(_)))}),[w,_]),i&&b&&f&&O&&w&&L&&E&&A&&_&&X&&Z?Object(u.jsx)(br,{userData:n,designSpec:i,graphicVisualCanvas:b,rightInnerOverlayCanvas:f,rightOuterOverlayCanvas:O,rightTexture:L,rightTextureCanvas:w,leftInnerOverlayCanvas:E,leftOuterOverlayCanvas:A,leftTexture:X,leftTextureCanvas:_,redMapCanvas:Z}):Object(u.jsx)("div",{})},jr=P.a.div(pr||(pr=Object(I.a)(["\n  max-width: 400px;\n  margin: auto;\n  display: flex;\n  flex-direction: column;\n  height: 100vh;\n  justify-content: center;\n  padding: 16px;\n"])));var fr,xr,gr=function(){return Object(u.jsxs)(jr,{children:[Object(u.jsx)(X,{google:!0,onClick:function(){window.open("http://solecomposer.com/auth/google","_self")},children:"Login With Google"}),Object(u.jsx)(s.b,{to:"/",children:Object(u.jsx)(X,{children:"Back"})})]})},vr=P.a.div(fr||(fr=Object(I.a)(["\n  max-width: 400px;\n  margin: auto;\n  display: flex;\n  flex-direction: column;\n  padding: 16px;\n"]))),Or=P.a.p(xr||(xr=Object(I.a)(["\n  font-family: 'Roboto';\n  padding: 0;\n  text-align: center;\n  margin: 0;\n  margin-top: 15px;\n"])));var yr,mr=function(){var e=Object(a.useContext)(D.context);return Object(u.jsxs)(vr,{children:[Object(u.jsx)(Or,{children:e.firstName}),Object(u.jsx)(Or,{children:e.email}),Object(u.jsx)(X,{onClick:function(){window.open("http://solecomposer.com/auth/logout","_self")},children:"Log Out"}),Object(u.jsx)(s.b,{to:"/",children:Object(u.jsx)(X,{children:"Back"})})]})},Cr=P.a.div(yr||(yr=Object(I.a)(["\n  max-width: 400px;\n  margin: auto;\n  display: flex;\n  flex-direction: column;\n  padding: 16px;\n"])));var wr,kr=function(){return Object(u.jsxs)(Cr,{children:[Object(u.jsx)(Or,{children:"404 - PAGE NOT FOUND"}),Object(u.jsx)(s.b,{to:"/",children:Object(u.jsx)(X,{children:"Home"})})]})},Dr=P.a.div(wr||(wr=Object(I.a)([""])));t(328);var Sr=function(){return Object(u.jsx)(Dr,{children:Object(u.jsx)(s.a,{children:Object(u.jsx)(D,{children:Object(u.jsxs)(o.c,{children:[Object(u.jsx)(o.a,{exact:!0,path:"/",component:Ye}),Object(u.jsx)(o.a,{exact:!0,path:"/login",component:gr}),Object(u.jsx)(o.a,{exact:!0,path:"/profile",component:mr}),Object(u.jsx)(o.a,{exact:!0,path:"/designer",component:hr}),Object(u.jsx)(o.a,{exact:!0,path:"/designer/:id",component:hr}),Object(u.jsx)(o.a,{path:"*",component:kr})]})})})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(Object(u.jsx)(r.a.StrictMode,{children:Object(u.jsx)(Sr,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[329,1,2]]]);
//# sourceMappingURL=main.46a25f52.chunk.js.map